<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Old doc/building.html</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
  <body>
    <pre>
   1 &lt;!DOCTYPE html&gt;
   2 &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; lang=&quot;&quot; xml:lang=&quot;&quot;&gt;
   3 &lt;head&gt;
   4   &lt;meta charset=&quot;utf-8&quot; /&gt;
   5   &lt;meta name=&quot;generator&quot; content=&quot;pandoc&quot; /&gt;
   6   &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, user-scalable=yes&quot; /&gt;
   7   &lt;title&gt;Building the JDK&lt;/title&gt;
   8   &lt;style&gt;
   9     code{white-space: pre-wrap;}
  10     span.smallcaps{font-variant: small-caps;}
  11     div.columns{display: flex; gap: min(4vw, 1.5em);}
  12     div.column{flex: auto; overflow-x: auto;}
  13     div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  14     ul.task-list{list-style: none;}
  15     ul.task-list li input[type=&quot;checkbox&quot;] {
  16       width: 0.8em;
  17       margin: 0 0.8em 0.2em -1.6em;
  18       vertical-align: middle;
  19     }
  20     .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  21   &lt;/style&gt;
  22   &lt;link rel=&quot;stylesheet&quot; href=&quot;../make/data/docs-resources/resources/jdk-default.css&quot; /&gt;
  23   &lt;style type=&quot;text/css&quot;&gt;pre, code, tt { color: #1d6ae5; }&lt;/style&gt;
  24   &lt;!--[if lt IE 9]&gt;
  25     &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js&quot;&gt;&lt;/script&gt;
  26   &lt;![endif]--&gt;
  27 &lt;/head&gt;
  28 &lt;body&gt;
  29 &lt;header id=&quot;title-block-header&quot;&gt;
  30 &lt;h1 class=&quot;title&quot;&gt;Building the JDK&lt;/h1&gt;
  31 &lt;/header&gt;
  32 &lt;nav id=&quot;TOC&quot; role=&quot;doc-toc&quot;&gt;
  33 &lt;ul&gt;
  34 &lt;li&gt;&lt;a href=&quot;#tldr-instructions-for-the-impatient&quot;
  35 id=&quot;toc-tldr-instructions-for-the-impatient&quot;&gt;TL;DR (Instructions for the
  36 Impatient)&lt;/a&gt;&lt;/li&gt;
  37 &lt;li&gt;&lt;a href=&quot;#introduction&quot; id=&quot;toc-introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
  38 &lt;li&gt;&lt;a href=&quot;#getting-the-source-code&quot;
  39 id=&quot;toc-getting-the-source-code&quot;&gt;Getting the Source Code&lt;/a&gt;
  40 &lt;ul&gt;
  41 &lt;li&gt;&lt;a href=&quot;#special-considerations&quot;
  42 id=&quot;toc-special-considerations&quot;&gt;Special Considerations&lt;/a&gt;&lt;/li&gt;
  43 &lt;/ul&gt;&lt;/li&gt;
  44 &lt;li&gt;&lt;a href=&quot;#build-hardware-requirements&quot;
  45 id=&quot;toc-build-hardware-requirements&quot;&gt;Build Hardware Requirements&lt;/a&gt;
  46 &lt;ul&gt;
  47 &lt;li&gt;&lt;a href=&quot;#building-on-x86&quot; id=&quot;toc-building-on-x86&quot;&gt;Building on
  48 x86&lt;/a&gt;&lt;/li&gt;
  49 &lt;li&gt;&lt;a href=&quot;#building-on-aarch64&quot; id=&quot;toc-building-on-aarch64&quot;&gt;Building
  50 on aarch64&lt;/a&gt;&lt;/li&gt;
  51 &lt;li&gt;&lt;a href=&quot;#building-on-32-bit-arm&quot;
  52 id=&quot;toc-building-on-32-bit-arm&quot;&gt;Building on 32-bit arm&lt;/a&gt;&lt;/li&gt;
  53 &lt;/ul&gt;&lt;/li&gt;
  54 &lt;li&gt;&lt;a href=&quot;#operating-system-requirements&quot;
  55 id=&quot;toc-operating-system-requirements&quot;&gt;Operating System Requirements&lt;/a&gt;
  56 &lt;ul&gt;
  57 &lt;li&gt;&lt;a href=&quot;#windows&quot; id=&quot;toc-windows&quot;&gt;Windows&lt;/a&gt;&lt;/li&gt;
  58 &lt;li&gt;&lt;a href=&quot;#macos&quot; id=&quot;toc-macos&quot;&gt;macOS&lt;/a&gt;&lt;/li&gt;
  59 &lt;li&gt;&lt;a href=&quot;#linux&quot; id=&quot;toc-linux&quot;&gt;Linux&lt;/a&gt;&lt;/li&gt;
  60 &lt;li&gt;&lt;a href=&quot;#aix&quot; id=&quot;toc-aix&quot;&gt;AIX&lt;/a&gt;&lt;/li&gt;
  61 &lt;/ul&gt;&lt;/li&gt;
  62 &lt;li&gt;&lt;a href=&quot;#native-compiler-toolchain-requirements&quot;
  63 id=&quot;toc-native-compiler-toolchain-requirements&quot;&gt;Native Compiler
  64 (Toolchain) Requirements&lt;/a&gt;
  65 &lt;ul&gt;
  66 &lt;li&gt;&lt;a href=&quot;#gcc&quot; id=&quot;toc-gcc&quot;&gt;gcc&lt;/a&gt;&lt;/li&gt;
  67 &lt;li&gt;&lt;a href=&quot;#clang&quot; id=&quot;toc-clang&quot;&gt;clang&lt;/a&gt;&lt;/li&gt;
  68 &lt;li&gt;&lt;a href=&quot;#apple-xcode&quot; id=&quot;toc-apple-xcode&quot;&gt;Apple Xcode&lt;/a&gt;&lt;/li&gt;
  69 &lt;li&gt;&lt;a href=&quot;#microsoft-visual-studio&quot;
  70 id=&quot;toc-microsoft-visual-studio&quot;&gt;Microsoft Visual Studio&lt;/a&gt;&lt;/li&gt;
  71 &lt;li&gt;&lt;a href=&quot;#ibm-xl-cc&quot; id=&quot;toc-ibm-xl-cc&quot;&gt;IBM XL C/C++&lt;/a&gt;&lt;/li&gt;
  72 &lt;/ul&gt;&lt;/li&gt;
  73 &lt;li&gt;&lt;a href=&quot;#boot-jdk-requirements&quot; id=&quot;toc-boot-jdk-requirements&quot;&gt;Boot
  74 JDK Requirements&lt;/a&gt;
  75 &lt;ul&gt;
  76 &lt;li&gt;&lt;a href=&quot;#getting-jdk-binaries&quot;
  77 id=&quot;toc-getting-jdk-binaries&quot;&gt;Getting JDK binaries&lt;/a&gt;&lt;/li&gt;
  78 &lt;/ul&gt;&lt;/li&gt;
  79 &lt;li&gt;&lt;a href=&quot;#external-library-requirements&quot;
  80 id=&quot;toc-external-library-requirements&quot;&gt;External Library Requirements&lt;/a&gt;
  81 &lt;ul&gt;
  82 &lt;li&gt;&lt;a href=&quot;#freetype&quot; id=&quot;toc-freetype&quot;&gt;FreeType&lt;/a&gt;&lt;/li&gt;
  83 &lt;li&gt;&lt;a href=&quot;#cups&quot; id=&quot;toc-cups&quot;&gt;CUPS&lt;/a&gt;&lt;/li&gt;
  84 &lt;li&gt;&lt;a href=&quot;#x11&quot; id=&quot;toc-x11&quot;&gt;X11&lt;/a&gt;&lt;/li&gt;
  85 &lt;li&gt;&lt;a href=&quot;#alsa&quot; id=&quot;toc-alsa&quot;&gt;ALSA&lt;/a&gt;&lt;/li&gt;
  86 &lt;li&gt;&lt;a href=&quot;#libffi&quot; id=&quot;toc-libffi&quot;&gt;libffi&lt;/a&gt;&lt;/li&gt;
  87 &lt;/ul&gt;&lt;/li&gt;
  88 &lt;li&gt;&lt;a href=&quot;#build-tools-requirements&quot;
  89 id=&quot;toc-build-tools-requirements&quot;&gt;Build Tools Requirements&lt;/a&gt;
  90 &lt;ul&gt;
  91 &lt;li&gt;&lt;a href=&quot;#autoconf&quot; id=&quot;toc-autoconf&quot;&gt;Autoconf&lt;/a&gt;&lt;/li&gt;
  92 &lt;li&gt;&lt;a href=&quot;#gnu-make&quot; id=&quot;toc-gnu-make&quot;&gt;GNU Make&lt;/a&gt;&lt;/li&gt;
  93 &lt;li&gt;&lt;a href=&quot;#gnu-bash&quot; id=&quot;toc-gnu-bash&quot;&gt;GNU Bash&lt;/a&gt;&lt;/li&gt;
  94 &lt;/ul&gt;&lt;/li&gt;
  95 &lt;li&gt;&lt;a href=&quot;#running-configure&quot; id=&quot;toc-running-configure&quot;&gt;Running
  96 Configure&lt;/a&gt;
  97 &lt;ul&gt;
  98 &lt;li&gt;&lt;a href=&quot;#common-configure-arguments&quot;
  99 id=&quot;toc-common-configure-arguments&quot;&gt;Common Configure Arguments&lt;/a&gt;&lt;/li&gt;
 100 &lt;li&gt;&lt;a href=&quot;#configure-control-variables&quot;
 101 id=&quot;toc-configure-control-variables&quot;&gt;Configure Control
 102 Variables&lt;/a&gt;&lt;/li&gt;
 103 &lt;/ul&gt;&lt;/li&gt;
 104 &lt;li&gt;&lt;a href=&quot;#running-make&quot; id=&quot;toc-running-make&quot;&gt;Running Make&lt;/a&gt;
 105 &lt;ul&gt;
 106 &lt;li&gt;&lt;a href=&quot;#common-make-targets&quot; id=&quot;toc-common-make-targets&quot;&gt;Common
 107 Make Targets&lt;/a&gt;&lt;/li&gt;
 108 &lt;li&gt;&lt;a href=&quot;#make-control-variables&quot;
 109 id=&quot;toc-make-control-variables&quot;&gt;Make Control Variables&lt;/a&gt;&lt;/li&gt;
 110 &lt;/ul&gt;&lt;/li&gt;
 111 &lt;li&gt;&lt;a href=&quot;#running-tests&quot; id=&quot;toc-running-tests&quot;&gt;Running
 112 Tests&lt;/a&gt;&lt;/li&gt;
 113 &lt;li&gt;&lt;a href=&quot;#signing&quot; id=&quot;toc-signing&quot;&gt;Signing&lt;/a&gt;
 114 &lt;ul&gt;
 115 &lt;li&gt;&lt;a href=&quot;#macos-1&quot; id=&quot;toc-macos-1&quot;&gt;macOS&lt;/a&gt;&lt;/li&gt;
 116 &lt;/ul&gt;&lt;/li&gt;
 117 &lt;li&gt;&lt;a href=&quot;#cross-compiling&quot;
 118 id=&quot;toc-cross-compiling&quot;&gt;Cross-compiling&lt;/a&gt;
 119 &lt;ul&gt;
 120 &lt;li&gt;&lt;a href=&quot;#cross-compiling-the-easy-way-with-openjdk-devkits&quot;
 121 id=&quot;toc-cross-compiling-the-easy-way-with-openjdk-devkits&quot;&gt;Cross
 122 compiling the easy way with OpenJDK devkits&lt;/a&gt;&lt;/li&gt;
 123 &lt;li&gt;&lt;a href=&quot;#boot-jdk-and-build-jdk&quot;
 124 id=&quot;toc-boot-jdk-and-build-jdk&quot;&gt;Boot JDK and Build JDK&lt;/a&gt;&lt;/li&gt;
 125 &lt;li&gt;&lt;a href=&quot;#specifying-the-target-platform&quot;
 126 id=&quot;toc-specifying-the-target-platform&quot;&gt;Specifying the Target
 127 Platform&lt;/a&gt;&lt;/li&gt;
 128 &lt;li&gt;&lt;a href=&quot;#toolchain-considerations&quot;
 129 id=&quot;toc-toolchain-considerations&quot;&gt;Toolchain Considerations&lt;/a&gt;&lt;/li&gt;
 130 &lt;li&gt;&lt;a href=&quot;#native-libraries&quot; id=&quot;toc-native-libraries&quot;&gt;Native
 131 Libraries&lt;/a&gt;&lt;/li&gt;
 132 &lt;li&gt;&lt;a href=&quot;#cross-compiling-with-debian-sysroots&quot;
 133 id=&quot;toc-cross-compiling-with-debian-sysroots&quot;&gt;Cross compiling with
 134 Debian sysroots&lt;/a&gt;&lt;/li&gt;
 135 &lt;li&gt;&lt;a href=&quot;#building-for-armaarch64&quot;
 136 id=&quot;toc-building-for-armaarch64&quot;&gt;Building for ARM/aarch64&lt;/a&gt;&lt;/li&gt;
 137 &lt;li&gt;&lt;a href=&quot;#building-for-musl&quot; id=&quot;toc-building-for-musl&quot;&gt;Building for
 138 musl&lt;/a&gt;&lt;/li&gt;
 139 &lt;li&gt;&lt;a href=&quot;#verifying-the-build&quot;
 140 id=&quot;toc-verifying-the-build&quot;&gt;Verifying the Build&lt;/a&gt;&lt;/li&gt;
 141 &lt;/ul&gt;&lt;/li&gt;
 142 &lt;li&gt;&lt;a href=&quot;#build-performance&quot; id=&quot;toc-build-performance&quot;&gt;Build
 143 Performance&lt;/a&gt;
 144 &lt;ul&gt;
 145 &lt;li&gt;&lt;a href=&quot;#disk-speed&quot; id=&quot;toc-disk-speed&quot;&gt;Disk Speed&lt;/a&gt;&lt;/li&gt;
 146 &lt;li&gt;&lt;a href=&quot;#virus-checking&quot; id=&quot;toc-virus-checking&quot;&gt;Virus
 147 Checking&lt;/a&gt;&lt;/li&gt;
 148 &lt;li&gt;&lt;a href=&quot;#ccache&quot; id=&quot;toc-ccache&quot;&gt;Ccache&lt;/a&gt;&lt;/li&gt;
 149 &lt;li&gt;&lt;a href=&quot;#precompiled-headers&quot;
 150 id=&quot;toc-precompiled-headers&quot;&gt;Precompiled Headers&lt;/a&gt;&lt;/li&gt;
 151 &lt;li&gt;&lt;a href=&quot;#icecc-icecream&quot; id=&quot;toc-icecc-icecream&quot;&gt;Icecc /
 152 icecream&lt;/a&gt;&lt;/li&gt;
 153 &lt;li&gt;&lt;a href=&quot;#using-the-javac-server&quot;
 154 id=&quot;toc-using-the-javac-server&quot;&gt;Using the javac server&lt;/a&gt;&lt;/li&gt;
 155 &lt;li&gt;&lt;a href=&quot;#building-the-right-target&quot;
 156 id=&quot;toc-building-the-right-target&quot;&gt;Building the Right Target&lt;/a&gt;&lt;/li&gt;
 157 &lt;/ul&gt;&lt;/li&gt;
 158 &lt;li&gt;&lt;a href=&quot;#troubleshooting&quot;
 159 id=&quot;toc-troubleshooting&quot;&gt;Troubleshooting&lt;/a&gt;
 160 &lt;ul&gt;
 161 &lt;li&gt;&lt;a href=&quot;#locating-the-source-of-the-error&quot;
 162 id=&quot;toc-locating-the-source-of-the-error&quot;&gt;Locating the Source of the
 163 Error&lt;/a&gt;&lt;/li&gt;
 164 &lt;li&gt;&lt;a href=&quot;#fixing-unexpected-build-failures&quot;
 165 id=&quot;toc-fixing-unexpected-build-failures&quot;&gt;Fixing Unexpected Build
 166 Failures&lt;/a&gt;&lt;/li&gt;
 167 &lt;li&gt;&lt;a href=&quot;#specific-build-issues&quot;
 168 id=&quot;toc-specific-build-issues&quot;&gt;Specific Build Issues&lt;/a&gt;&lt;/li&gt;
 169 &lt;li&gt;&lt;a href=&quot;#getting-help&quot; id=&quot;toc-getting-help&quot;&gt;Getting Help&lt;/a&gt;&lt;/li&gt;
 170 &lt;/ul&gt;&lt;/li&gt;
 171 &lt;li&gt;&lt;a href=&quot;#reproducible-builds&quot;
 172 id=&quot;toc-reproducible-builds&quot;&gt;Reproducible Builds&lt;/a&gt;&lt;/li&gt;
 173 &lt;li&gt;&lt;a href=&quot;#hints-and-suggestions-for-advanced-users&quot;
 174 id=&quot;toc-hints-and-suggestions-for-advanced-users&quot;&gt;Hints and Suggestions
 175 for Advanced Users&lt;/a&gt;
 176 &lt;ul&gt;
 177 &lt;li&gt;&lt;a href=&quot;#bash-completion&quot; id=&quot;toc-bash-completion&quot;&gt;Bash
 178 Completion&lt;/a&gt;&lt;/li&gt;
 179 &lt;li&gt;&lt;a href=&quot;#using-multiple-configurations&quot;
 180 id=&quot;toc-using-multiple-configurations&quot;&gt;Using Multiple
 181 Configurations&lt;/a&gt;&lt;/li&gt;
 182 &lt;li&gt;&lt;a href=&quot;#handling-reconfigurations&quot;
 183 id=&quot;toc-handling-reconfigurations&quot;&gt;Handling Reconfigurations&lt;/a&gt;&lt;/li&gt;
 184 &lt;li&gt;&lt;a href=&quot;#using-fine-grained-make-targets&quot;
 185 id=&quot;toc-using-fine-grained-make-targets&quot;&gt;Using Fine-Grained Make
 186 Targets&lt;/a&gt;&lt;/li&gt;
 187 &lt;/ul&gt;&lt;/li&gt;
 188 &lt;li&gt;&lt;a href=&quot;#understanding-the-build-system&quot;
 189 id=&quot;toc-understanding-the-build-system&quot;&gt;Understanding the Build
 190 System&lt;/a&gt;
 191 &lt;ul&gt;
 192 &lt;li&gt;&lt;a href=&quot;#configurations&quot;
 193 id=&quot;toc-configurations&quot;&gt;Configurations&lt;/a&gt;&lt;/li&gt;
 194 &lt;li&gt;&lt;a href=&quot;#build-output-structure&quot;
 195 id=&quot;toc-build-output-structure&quot;&gt;Build Output Structure&lt;/a&gt;&lt;/li&gt;
 196 &lt;li&gt;&lt;a href=&quot;#fixpath&quot; id=&quot;toc-fixpath&quot;&gt;Fixpath&lt;/a&gt;&lt;/li&gt;
 197 &lt;li&gt;&lt;a href=&quot;#native-debug-symbols&quot; id=&quot;toc-native-debug-symbols&quot;&gt;Native
 198 Debug Symbols&lt;/a&gt;&lt;/li&gt;
 199 &lt;li&gt;&lt;a href=&quot;#autoconf-details&quot; id=&quot;toc-autoconf-details&quot;&gt;Autoconf
 200 Details&lt;/a&gt;&lt;/li&gt;
 201 &lt;li&gt;&lt;a href=&quot;#developing-the-build-system-itself&quot;
 202 id=&quot;toc-developing-the-build-system-itself&quot;&gt;Developing the Build System
 203 Itself&lt;/a&gt;&lt;/li&gt;
 204 &lt;/ul&gt;&lt;/li&gt;
 205 &lt;li&gt;&lt;a href=&quot;#contributing-to-the-jdk&quot;
 206 id=&quot;toc-contributing-to-the-jdk&quot;&gt;Contributing to the JDK&lt;/a&gt;&lt;/li&gt;
 207 &lt;li&gt;&lt;a href=&quot;#editing-this-document&quot;
 208 id=&quot;toc-editing-this-document&quot;&gt;Editing this document&lt;/a&gt;&lt;/li&gt;
 209 &lt;/ul&gt;
 210 &lt;/nav&gt;
 211 &lt;h2 id=&quot;tldr-instructions-for-the-impatient&quot;&gt;TL;DR (Instructions for the
 212 Impatient)&lt;/h2&gt;
 213 &lt;p&gt;If you are eager to try out building the JDK, these simple steps
 214 works most of the time. They assume that you have installed Git (and
 215 Cygwin if running on Windows) and cloned the top-level JDK repository
 216 that you want to build.&lt;/p&gt;
 217 &lt;ol type=&quot;1&quot;&gt;
 218 &lt;li&gt;&lt;p&gt;&lt;a href=&quot;#getting-the-source-code&quot;&gt;Get the complete source
 219 code&lt;/a&gt;:&lt;br /&gt;
 220 &lt;code&gt;git clone https://git.openjdk.org/jdk/&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
 221 &lt;li&gt;&lt;p&gt;&lt;a href=&quot;#running-configure&quot;&gt;Run configure&lt;/a&gt;:&lt;br /&gt;
 222 &lt;code&gt;bash configure&lt;/code&gt;&lt;/p&gt;
 223 &lt;p&gt;If &lt;code&gt;configure&lt;/code&gt; fails due to missing dependencies (to
 224 either the &lt;a
 225 href=&quot;#native-compiler-toolchain-requirements&quot;&gt;toolchain&lt;/a&gt;, &lt;a
 226 href=&quot;#build-tools-requirements&quot;&gt;build tools&lt;/a&gt;, &lt;a
 227 href=&quot;#external-library-requirements&quot;&gt;external libraries&lt;/a&gt; or the &lt;a
 228 href=&quot;#boot-jdk-requirements&quot;&gt;boot JDK&lt;/a&gt;), most of the time it prints
 229 a suggestion on how to resolve the situation on your platform. Follow
 230 the instructions, and try running &lt;code&gt;bash configure&lt;/code&gt;
 231 again.&lt;/p&gt;&lt;/li&gt;
 232 &lt;li&gt;&lt;p&gt;&lt;a href=&quot;#running-make&quot;&gt;Run make&lt;/a&gt;:&lt;br /&gt;
 233 &lt;code&gt;make images&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
 234 &lt;li&gt;&lt;p&gt;Verify your newly built JDK:&lt;br /&gt;
 235 &lt;code&gt;./build/*/images/jdk/bin/java -version&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
 236 &lt;li&gt;&lt;p&gt;&lt;a href=&quot;##running-tests&quot;&gt;Run basic tests&lt;/a&gt;:&lt;br /&gt;
 237 &lt;code&gt;make run-test-tier1&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
 238 &lt;/ol&gt;
 239 &lt;p&gt;If any of these steps failed, or if you want to know more about build
 240 requirements or build functionality, please continue reading this
 241 document.&lt;/p&gt;
 242 &lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;
 243 &lt;p&gt;The JDK is a complex software project. Building it requires a certain
 244 amount of technical expertise, a fair number of dependencies on external
 245 software, and reasonably powerful hardware.&lt;/p&gt;
 246 &lt;p&gt;If you just want to use the JDK and not build it yourself, this
 247 document is not for you. See for instance &lt;a
 248 href=&quot;http://openjdk.org/install&quot;&gt;OpenJDK installation&lt;/a&gt; for some
 249 methods of installing a prebuilt JDK.&lt;/p&gt;
 250 &lt;h2 id=&quot;getting-the-source-code&quot;&gt;Getting the Source Code&lt;/h2&gt;
 251 &lt;p&gt;Make sure you are getting the correct version. As of JDK 10, the
 252 source is no longer split into separate repositories so you only need to
 253 clone one single repository. At the &lt;a
 254 href=&quot;https://git.openjdk.org/&quot;&gt;OpenJDK Git site&lt;/a&gt; you can see a list
 255 of all available repositories. If you want to build an older version,
 256 e.g. JDK 11, it is recommended that you get the &lt;code&gt;jdk11u&lt;/code&gt;
 257 repo, which contains incremental updates, instead of the
 258 &lt;code&gt;jdk11&lt;/code&gt; repo, which was frozen at JDK 11 GA.&lt;/p&gt;
 259 &lt;p&gt;If you are new to Git, a good place to start is the book &lt;a
 260 href=&quot;https://git-scm.com/book/en/v2&quot;&gt;Pro Git&lt;/a&gt;. The rest of this
 261 document assumes a working knowledge of Git.&lt;/p&gt;
 262 &lt;h3 id=&quot;special-considerations&quot;&gt;Special Considerations&lt;/h3&gt;
 263 &lt;p&gt;For a smooth building experience, it is recommended that you follow
 264 these rules on where and how to check out the source code.&lt;/p&gt;
 265 &lt;ul&gt;
 266 &lt;li&gt;&lt;p&gt;Do not check out the source code in a path which contains spaces.
 267 Chances are the build will not work. This is most likely to be an issue
 268 on Windows systems.&lt;/p&gt;&lt;/li&gt;
 269 &lt;li&gt;&lt;p&gt;Do not check out the source code in a path which has a very long
 270 name or is nested many levels deep. Chances are you will hit an OS
 271 limitation during the build.&lt;/p&gt;&lt;/li&gt;
 272 &lt;li&gt;&lt;p&gt;Put the source code on a local disk, not a network share. If
 273 possible, use an SSD. The build process is very disk intensive, and
 274 having slow disk access will significantly increase build times. If you
 275 need to use a network share for the source code, see below for
 276 suggestions on how to keep the build artifacts on a local disk.&lt;/p&gt;&lt;/li&gt;
 277 &lt;li&gt;&lt;p&gt;On Windows, if using &lt;a href=&quot;#cygwin&quot;&gt;Cygwin&lt;/a&gt;, extra care
 278 must be taken to make sure the environment is consistent. It is
 279 recommended that you follow this procedure:&lt;/p&gt;
 280 &lt;ul&gt;
 281 &lt;li&gt;&lt;p&gt;Create the directory that is going to contain the top directory
 282 of the JDK clone by using the &lt;code&gt;mkdir&lt;/code&gt; command in the Cygwin
 283 bash shell. That is, do &lt;em&gt;not&lt;/em&gt; create it using Windows Explorer.
 284 This will ensure that it will have proper Cygwin attributes, and that
 285 it&#39;s children will inherit those attributes.&lt;/p&gt;&lt;/li&gt;
 286 &lt;li&gt;&lt;p&gt;Do not put the JDK clone in a path under your Cygwin home
 287 directory. This is especially important if your user name contains
 288 spaces and/or mixed upper and lower case letters.&lt;/p&gt;&lt;/li&gt;
 289 &lt;li&gt;&lt;p&gt;You need to install a git client. You have two choices, Cygwin
 290 git or Git for Windows. Unfortunately there are pros and cons with each
 291 choice.&lt;/p&gt;
 292 &lt;ul&gt;
 293 &lt;li&gt;&lt;p&gt;The Cygwin &lt;code&gt;git&lt;/code&gt; client has no line ending issues and
 294 understands Cygwin paths (which are used throughout the JDK build
 295 system). However, it does not currently work well with the Skara CLI
 296 tooling. Please see the &lt;a
 297 href=&quot;https://wiki.openjdk.org/display/SKARA/Skara#Skara-Git&quot;&gt;Skara wiki
 298 on Git clients&lt;/a&gt; for up-to-date information about the Skara git client
 299 support.&lt;/p&gt;&lt;/li&gt;
 300 &lt;li&gt;&lt;p&gt;The &lt;a href=&quot;https://gitforwindows.org&quot;&gt;Git for Windows&lt;/a&gt;
 301 client has issues with line endings, and do not understand Cygwin paths.
 302 It does work well with the Skara CLI tooling, however. To alleviate the
 303 line ending problems, make sure you set &lt;code&gt;core.autocrlf&lt;/code&gt; to
 304 &lt;code&gt;false&lt;/code&gt; (this is asked during installation).&lt;/p&gt;&lt;/li&gt;
 305 &lt;/ul&gt;&lt;/li&gt;
 306 &lt;/ul&gt;
 307 &lt;p&gt;Failure to follow this procedure might result in hard-to-debug build
 308 problems.&lt;/p&gt;&lt;/li&gt;
 309 &lt;/ul&gt;
 310 &lt;h2 id=&quot;build-hardware-requirements&quot;&gt;Build Hardware Requirements&lt;/h2&gt;
 311 &lt;p&gt;The JDK is a massive project, and require machines ranging from
 312 decent to powerful to be able to build in a reasonable amount of time,
 313 or to be able to complete a build at all.&lt;/p&gt;
 314 &lt;p&gt;We &lt;em&gt;strongly&lt;/em&gt; recommend usage of an SSD disk for the build,
 315 since disk speed is one of the limiting factors for build
 316 performance.&lt;/p&gt;
 317 &lt;h3 id=&quot;building-on-x86&quot;&gt;Building on x86&lt;/h3&gt;
 318 &lt;p&gt;At a minimum, a machine with 2-4 cores is advisable, as well as 2-4
 319 GB of RAM. (The more cores to use, the more memory you need.) At least 6
 320 GB of free disk space is required.&lt;/p&gt;
 321 &lt;p&gt;Even for 32-bit builds, it is recommended to use a 64-bit build
 322 machine, and instead create a 32-bit target using
 323 &lt;code&gt;--with-target-bits=32&lt;/code&gt;.&lt;/p&gt;
 324 &lt;h3 id=&quot;building-on-aarch64&quot;&gt;Building on aarch64&lt;/h3&gt;
 325 &lt;p&gt;At a minimum, a machine with 8 cores is advisable, as well as 8 GB of
 326 RAM. (The more cores to use, the more memory you need.) At least 6 GB of
 327 free disk space is required.&lt;/p&gt;
 328 &lt;p&gt;If you do not have access to sufficiently powerful hardware, it is
 329 also possible to use &lt;a href=&quot;#cross-compiling&quot;&gt;cross-compiling&lt;/a&gt;.&lt;/p&gt;
 330 &lt;h4 id=&quot;branch-protection&quot;&gt;Branch Protection&lt;/h4&gt;
 331 &lt;p&gt;In order to use Branch Protection features in the VM,
 332 &lt;code&gt;--enable-branch-protection&lt;/code&gt; must be used. This option
 333 requires C++ compiler support (GCC 9.1.0+ or Clang 10+). The resulting
 334 build can be run on both machines with and without support for branch
 335 protection in hardware. Branch Protection is only supported for Linux
 336 targets.&lt;/p&gt;
 337 &lt;h3 id=&quot;building-on-32-bit-arm&quot;&gt;Building on 32-bit arm&lt;/h3&gt;
 338 &lt;p&gt;This is not recommended. Instead, see the section on &lt;a
 339 href=&quot;#cross-compiling&quot;&gt;Cross-compiling&lt;/a&gt;.&lt;/p&gt;
 340 &lt;h2 id=&quot;operating-system-requirements&quot;&gt;Operating System
 341 Requirements&lt;/h2&gt;
 342 &lt;p&gt;The mainline JDK project supports Linux, macOS, AIX and Windows.
 343 Support for other operating system, e.g. BSD, exists in separate &quot;port&quot;
 344 projects.&lt;/p&gt;
 345 &lt;p&gt;In general, the JDK can be built on a wide range of versions of these
 346 operating systems, but the further you deviate from what is tested on a
 347 daily basis, the more likely you are to run into problems.&lt;/p&gt;
 348 &lt;p&gt;This table lists the OS versions used by Oracle when building the
 349 JDK. Such information is always subject to change, but this table is up
 350 to date at the time of writing.&lt;/p&gt;
 351 &lt;table&gt;
 352 &lt;thead&gt;
 353 &lt;tr class=&quot;header&quot;&gt;
 354 &lt;th style=&quot;text-align: left;&quot;&gt;Operating system&lt;/th&gt;
 355 &lt;th style=&quot;text-align: left;&quot;&gt;Vendor/version used&lt;/th&gt;
 356 &lt;/tr&gt;
 357 &lt;/thead&gt;
 358 &lt;tbody&gt;
 359 &lt;tr class=&quot;odd&quot;&gt;
 360 &lt;td style=&quot;text-align: left;&quot;&gt;Linux&lt;/td&gt;
 361 &lt;td style=&quot;text-align: left;&quot;&gt;Oracle Enterprise Linux 6.4 / 7.6&lt;/td&gt;
 362 &lt;/tr&gt;
 363 &lt;tr class=&quot;even&quot;&gt;
 364 &lt;td style=&quot;text-align: left;&quot;&gt;macOS&lt;/td&gt;
 365 &lt;td style=&quot;text-align: left;&quot;&gt;Mac OS X 10.13 (High Sierra)&lt;/td&gt;
 366 &lt;/tr&gt;
 367 &lt;tr class=&quot;odd&quot;&gt;
 368 &lt;td style=&quot;text-align: left;&quot;&gt;Windows&lt;/td&gt;
 369 &lt;td style=&quot;text-align: left;&quot;&gt;Windows Server 2012 R2&lt;/td&gt;
 370 &lt;/tr&gt;
 371 &lt;/tbody&gt;
 372 &lt;/table&gt;
 373 &lt;p&gt;The double version numbers for Linux are due to the hybrid model used
 374 at Oracle, where header files and external libraries from an older
 375 version are used when building on a more modern version of the OS.&lt;/p&gt;
 376 &lt;p&gt;The Build Group has a wiki page with &lt;a
 377 href=&quot;https://wiki.openjdk.org/display/Build/Supported+Build+Platforms&quot;&gt;Supported
 378 Build Platforms&lt;/a&gt;. From time to time, this is updated by contributors
 379 to list successes or failures of building on different platforms.&lt;/p&gt;
 380 &lt;h3 id=&quot;windows&quot;&gt;Windows&lt;/h3&gt;
 381 &lt;p&gt;Windows XP is not a supported platform, but all newer Windows should
 382 be able to build the JDK.&lt;/p&gt;
 383 &lt;p&gt;On Windows, it is important that you pay attention to the
 384 instructions in the &lt;a href=&quot;#special-considerations&quot;&gt;Special
 385 Considerations&lt;/a&gt;.&lt;/p&gt;
 386 &lt;p&gt;Windows is the only non-POSIX OS supported by the JDK, and as such,
 387 requires some extra care. A POSIX support layer is required to build on
 388 Windows. Currently, the only supported such layers are Cygwin, Windows
 389 Subsystem for Linux (WSL), and MSYS2. (MSYS is no longer supported due
 390 to an outdated bash; While OpenJDK can be built with MSYS2, support for
 391 it is still experimental, so build failures and unusual errors are not
 392 uncommon.)&lt;/p&gt;
 393 &lt;p&gt;Internally in the build system, all paths are represented as
 394 Unix-style paths, e.g. &lt;code&gt;/cygdrive/c/git/jdk/Makefile&lt;/code&gt; rather
 395 than &lt;code&gt;C:\git\jdk\Makefile&lt;/code&gt;. This rule also applies to input
 396 to the build system, e.g. in arguments to &lt;code&gt;configure&lt;/code&gt;. So,
 397 use &lt;code&gt;--with-msvcr-dll=/cygdrive/c/msvcr100.dll&lt;/code&gt; rather than
 398 &lt;code&gt;--with-msvcr-dll=c:\msvcr100.dll&lt;/code&gt;. For details on this
 399 conversion, see the section on &lt;a href=&quot;#fixpath&quot;&gt;Fixpath&lt;/a&gt;.&lt;/p&gt;
 400 &lt;h4 id=&quot;cygwin&quot;&gt;Cygwin&lt;/h4&gt;
 401 &lt;p&gt;A functioning &lt;a href=&quot;http://www.cygwin.com/&quot;&gt;Cygwin&lt;/a&gt; environment
 402 is required for building the JDK on Windows. If you have a 64-bit OS, we
 403 strongly recommend using the 64-bit version of Cygwin.&lt;/p&gt;
 404 &lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Cygwin has a model of continuously updating
 405 all packages without any easy way to install or revert to a specific
 406 version of a package. This means that whenever you add or update a
 407 package in Cygwin, you might (inadvertently) update tools that are used
 408 by the JDK build process, and that can cause unexpected build
 409 problems.&lt;/p&gt;
 410 &lt;p&gt;The JDK requires GNU Make 4.0 or greater in Cygwin. This is usually
 411 not a problem, since Cygwin currently only distributes GNU Make at a
 412 version above 4.0.&lt;/p&gt;
 413 &lt;p&gt;Apart from the basic Cygwin installation, the following packages must
 414 also be installed:&lt;/p&gt;
 415 &lt;ul&gt;
 416 &lt;li&gt;&lt;code&gt;autoconf&lt;/code&gt;&lt;/li&gt;
 417 &lt;li&gt;&lt;code&gt;make&lt;/code&gt;&lt;/li&gt;
 418 &lt;li&gt;&lt;code&gt;zip&lt;/code&gt;&lt;/li&gt;
 419 &lt;li&gt;&lt;code&gt;unzip&lt;/code&gt;&lt;/li&gt;
 420 &lt;/ul&gt;
 421 &lt;p&gt;Often, you can install these packages using the following command
 422 line:&lt;/p&gt;
 423 &lt;pre&gt;&lt;code&gt;&amp;lt;path to Cygwin setup&amp;gt;/setup-x86_64 -q -P autoconf -P make -P unzip -P zip&lt;/code&gt;&lt;/pre&gt;
 424 &lt;p&gt;Unfortunately, Cygwin can be unreliable in certain circumstances. If
 425 you experience build tool crashes or strange issues when building on
 426 Windows, please check the Cygwin FAQ on the &lt;a
 427 href=&quot;https://cygwin.com/faq/faq.html#faq.using.bloda&quot;&gt;&quot;BLODA&quot; list&lt;/a&gt;
 428 and the section on &lt;a
 429 href=&quot;https://cygwin.com/faq/faq.html#faq.using.fixing-fork-failures&quot;&gt;fork()
 430 failures&lt;/a&gt;.&lt;/p&gt;
 431 &lt;h4 id=&quot;windows-subsystem-for-linux-wsl&quot;&gt;Windows Subsystem for Linux
 432 (WSL)&lt;/h4&gt;
 433 &lt;p&gt;Windows 10 1809 or newer is supported due to a dependency on the
 434 wslpath utility and support for environment variable sharing through
 435 WSLENV. Version 1803 can work but intermittent build failures have been
 436 observed.&lt;/p&gt;
 437 &lt;p&gt;It&#39;s possible to build both Windows and Linux binaries from WSL. To
 438 build Windows binaries, you must use a Windows boot JDK (located in a
 439 Windows-accessible directory). To build Linux binaries, you must use a
 440 Linux boot JDK. The default behavior is to build for Windows. To build
 441 for Linux, pass
 442 &lt;code&gt;--build=x86_64-unknown-linux-gnu --openjdk-target=x86_64-unknown-linux-gnu&lt;/code&gt;
 443 to &lt;code&gt;configure&lt;/code&gt;.&lt;/p&gt;
 444 &lt;p&gt;If building Windows binaries, the source code must be located in a
 445 Windows- accessible directory. This is because Windows executables (such
 446 as Visual Studio and the boot JDK) must be able to access the source
 447 code. Also, the drive where the source is stored must be mounted as
 448 case-insensitive by changing either /etc/fstab or /etc/wsl.conf in WSL.
 449 Individual directories may be corrected using the fsutil tool in case
 450 the source was cloned before changing the mount options.&lt;/p&gt;
 451 &lt;p&gt;Note that while it&#39;s possible to build on WSL, testing is still not
 452 fully supported.&lt;/p&gt;
 453 &lt;h3 id=&quot;macos&quot;&gt;macOS&lt;/h3&gt;
 454 &lt;p&gt;Apple is using a quite aggressive scheme of pushing OS updates, and
 455 coupling these updates with required updates of Xcode. Unfortunately,
 456 this makes it difficult for a project such as the JDK to keep pace with
 457 a continuously updated machine running macOS. See the section on &lt;a
 458 href=&quot;#apple-xcode&quot;&gt;Apple Xcode&lt;/a&gt; on some strategies to deal with
 459 this.&lt;/p&gt;
 460 &lt;p&gt;It is recommended that you use at least Mac OS X 10.13 (High Sierra).
 461 At the time of writing, the JDK has been successfully compiled on macOS
 462 10.12 (Sierra).&lt;/p&gt;
 463 &lt;p&gt;The standard macOS environment contains the basic tooling needed to
 464 build, but for external libraries a package manager is recommended. The
 465 JDK uses &lt;a href=&quot;https://brew.sh/&quot;&gt;homebrew&lt;/a&gt; in the examples, but
 466 feel free to use whatever manager you want (or none).&lt;/p&gt;
 467 &lt;h3 id=&quot;linux&quot;&gt;Linux&lt;/h3&gt;
 468 &lt;p&gt;It is often not much problem to build the JDK on Linux. The only
 469 general advice is to try to use the compilers, external libraries and
 470 header files as provided by your distribution.&lt;/p&gt;
 471 &lt;p&gt;The basic tooling is provided as part of the core operating system,
 472 but you will most likely need to install developer packages.&lt;/p&gt;
 473 &lt;p&gt;For apt-based distributions (Debian, Ubuntu, etc), try this:&lt;/p&gt;
 474 &lt;pre&gt;&lt;code&gt;sudo apt-get install build-essential&lt;/code&gt;&lt;/pre&gt;
 475 &lt;p&gt;For rpm-based distributions (Fedora, Red Hat, etc), try this:&lt;/p&gt;
 476 &lt;pre&gt;&lt;code&gt;sudo yum groupinstall &amp;quot;Development Tools&amp;quot;&lt;/code&gt;&lt;/pre&gt;
 477 &lt;p&gt;For Alpine Linux, aside from basic tooling, install the GNU versions
 478 of some programs:&lt;/p&gt;
 479 &lt;pre&gt;&lt;code&gt;sudo apk add build-base bash grep zip&lt;/code&gt;&lt;/pre&gt;
 480 &lt;h3 id=&quot;aix&quot;&gt;AIX&lt;/h3&gt;
 481 &lt;p&gt;Please consult the AIX section of the &lt;a
 482 href=&quot;https://wiki.openjdk.org/display/Build/Supported+Build+Platforms&quot;&gt;Supported
 483 Build Platforms&lt;/a&gt; OpenJDK Build Wiki page for details about which
 484 versions of AIX are supported.&lt;/p&gt;
 485 &lt;h2 id=&quot;native-compiler-toolchain-requirements&quot;&gt;Native Compiler
 486 (Toolchain) Requirements&lt;/h2&gt;
 487 &lt;p&gt;Large portions of the JDK consists of native code, that needs to be
 488 compiled to be able to run on the target platform. In theory, toolchain
 489 and operating system should be independent factors, but in practice
 490 there&#39;s more or less a one-to-one correlation between target operating
 491 system and toolchain. There are ongoing efforts to loosen this strict
 492 coupling between compiler and operating system (see &lt;a
 493 href=&quot;https://bugs.openjdk.org/browse/JDK-8288293&quot;&gt;JDK-8288293&lt;/a&gt;) but
 494 it will likely be a very long time before this goal can be realized.&lt;/p&gt;
 495 &lt;table&gt;
 496 &lt;thead&gt;
 497 &lt;tr class=&quot;header&quot;&gt;
 498 &lt;th&gt;Operating system&lt;/th&gt;
 499 &lt;th&gt;Supported toolchain&lt;/th&gt;
 500 &lt;/tr&gt;
 501 &lt;/thead&gt;
 502 &lt;tbody&gt;
 503 &lt;tr class=&quot;odd&quot;&gt;
 504 &lt;td&gt;Linux&lt;/td&gt;
 505 &lt;td&gt;gcc, clang&lt;/td&gt;
 506 &lt;/tr&gt;
 507 &lt;tr class=&quot;even&quot;&gt;
 508 &lt;td&gt;macOS&lt;/td&gt;
 509 &lt;td&gt;Apple Xcode (using clang)&lt;/td&gt;
 510 &lt;/tr&gt;
 511 &lt;tr class=&quot;odd&quot;&gt;
 512 &lt;td&gt;AIX&lt;/td&gt;
 513 &lt;td&gt;IBM XL C/C++&lt;/td&gt;
 514 &lt;/tr&gt;
 515 &lt;tr class=&quot;even&quot;&gt;
 516 &lt;td&gt;Windows&lt;/td&gt;
 517 &lt;td&gt;Microsoft Visual Studio&lt;/td&gt;
 518 &lt;/tr&gt;
 519 &lt;/tbody&gt;
 520 &lt;/table&gt;
 521 &lt;p&gt;Please see the individual sections on the toolchains for version
 522 recommendations. As a reference, these versions of the toolchains are
 523 used, at the time of writing, by Oracle for the daily builds of the JDK.
 524 It should be possible to compile the JDK with both older and newer
 525 versions, but the closer you stay to this list, the more likely you are
 526 to compile successfully without issues.&lt;/p&gt;
 527 &lt;table&gt;
 528 &lt;thead&gt;
 529 &lt;tr class=&quot;header&quot;&gt;
 530 &lt;th&gt;Operating system&lt;/th&gt;
 531 &lt;th&gt;Toolchain version&lt;/th&gt;
 532 &lt;/tr&gt;
 533 &lt;/thead&gt;
 534 &lt;tbody&gt;
 535 &lt;tr class=&quot;odd&quot;&gt;
 536 &lt;td&gt;Linux&lt;/td&gt;
 537 &lt;td&gt;gcc 11.2.0&lt;/td&gt;
 538 &lt;/tr&gt;
 539 &lt;tr class=&quot;even&quot;&gt;
 540 &lt;td&gt;macOS&lt;/td&gt;
 541 &lt;td&gt;Apple Xcode 10.1 (using clang 10.0.0)&lt;/td&gt;
 542 &lt;/tr&gt;
 543 &lt;tr class=&quot;odd&quot;&gt;
 544 &lt;td&gt;Windows&lt;/td&gt;
 545 &lt;td&gt;Microsoft Visual Studio 2022 update 17.1.0&lt;/td&gt;
 546 &lt;/tr&gt;
 547 &lt;/tbody&gt;
 548 &lt;/table&gt;
 549 &lt;p&gt;All compilers are expected to be able to compile to the C99 language
 550 standard, as some C99 features are used in the source code. Microsoft
 551 Visual Studio doesn&#39;t fully support C99 so in practice shared code is
 552 limited to using C99 features that it does support.&lt;/p&gt;
 553 &lt;h3 id=&quot;gcc&quot;&gt;gcc&lt;/h3&gt;
 554 &lt;p&gt;The minimum accepted version of gcc is 5.0. Older versions will
 555 generate a warning by &lt;code&gt;configure&lt;/code&gt; and are unlikely to
 556 work.&lt;/p&gt;
 557 &lt;p&gt;The JDK is currently known to be able to compile with at least
 558 version 11.2 of gcc.&lt;/p&gt;
 559 &lt;p&gt;In general, any version between these two should be usable.&lt;/p&gt;
 560 &lt;h3 id=&quot;clang&quot;&gt;clang&lt;/h3&gt;
 561 &lt;p&gt;The minimum accepted version of clang is 3.5. Older versions will not
 562 be accepted by &lt;code&gt;configure&lt;/code&gt;.&lt;/p&gt;
 563 &lt;p&gt;To use clang instead of gcc on Linux, use
 564 &lt;code&gt;--with-toolchain-type=clang&lt;/code&gt;.&lt;/p&gt;
 565 &lt;h3 id=&quot;apple-xcode&quot;&gt;Apple Xcode&lt;/h3&gt;
 566 &lt;p&gt;The oldest supported version of Xcode is 8.&lt;/p&gt;
 567 &lt;p&gt;You will need the Xcode command line developer tools to be able to
 568 build the JDK. (Actually, &lt;em&gt;only&lt;/em&gt; the command line tools are
 569 needed, not the IDE.) The simplest way to install these is to run:&lt;/p&gt;
 570 &lt;pre&gt;&lt;code&gt;xcode-select --install&lt;/code&gt;&lt;/pre&gt;
 571 &lt;p&gt;When updating Xcode, it is advisable to keep an older version for
 572 building the JDK. To use a specific version of Xcode you have multiple
 573 options:&lt;/p&gt;
 574 &lt;ul&gt;
 575 &lt;li&gt;Use &lt;code&gt;xcode-select -s&lt;/code&gt; before running
 576 &lt;code&gt;configure&lt;/code&gt;, e.g.
 577 &lt;code&gt;xcode-select -s /Applications/Xcode13.1.app&lt;/code&gt;. The drawback
 578 is that the setting is system wide and you may have to revert it after
 579 an OpenJDK build.&lt;/li&gt;
 580 &lt;li&gt;Use configure option &lt;code&gt;--with-xcode-path&lt;/code&gt;, e.g.
 581 &lt;code&gt;configure --with-xcode-path=/Applications/Xcode13.1.app&lt;/code&gt;
 582 This allows using a specific Xcode version for an OpenJDK build,
 583 independently of the active Xcode version by
 584 &lt;code&gt;xcode-select&lt;/code&gt;.&lt;/li&gt;
 585 &lt;/ul&gt;
 586 &lt;p&gt;If you have recently (inadvertently) updated your OS and/or Xcode
 587 version, and the JDK can no longer be built, please see the section on
 588 &lt;a href=&quot;#problems-with-the-build-environment&quot;&gt;Problems with the Build
 589 Environment&lt;/a&gt;, and &lt;a href=&quot;#getting-help&quot;&gt;Getting Help&lt;/a&gt; to find
 590 out if there are any recent, non-merged patches available for this
 591 update.&lt;/p&gt;
 592 &lt;h3 id=&quot;microsoft-visual-studio&quot;&gt;Microsoft Visual Studio&lt;/h3&gt;
 593 &lt;p&gt;The minimum accepted version is Visual Studio 2019 version 16.8.
 594 (Note that this version is often presented as &quot;MSVC 14.28&quot;, and reported
 595 by cl.exe as 19.28.) Older versions will not be accepted by
 596 &lt;code&gt;configure&lt;/code&gt; and will not work. The maximum accepted version
 597 of Visual Studio is 2022.&lt;/p&gt;
 598 &lt;p&gt;If you have multiple versions of Visual Studio installed,
 599 &lt;code&gt;configure&lt;/code&gt; will by default pick the latest. You can request
 600 a specific version to be used by setting
 601 &lt;code&gt;--with-toolchain-version&lt;/code&gt;, e.g.
 602 &lt;code&gt;--with-toolchain-version=2022&lt;/code&gt;.&lt;/p&gt;
 603 &lt;p&gt;If you have Visual Studio installed but &lt;code&gt;configure&lt;/code&gt; fails
 604 to detect it, it may be because of &lt;a href=&quot;#spaces-in-path&quot;&gt;spaces in
 605 path&lt;/a&gt;.&lt;/p&gt;
 606 &lt;h3 id=&quot;ibm-xl-cc&quot;&gt;IBM XL C/C++&lt;/h3&gt;
 607 &lt;p&gt;Please consult the AIX section of the &lt;a
 608 href=&quot;https://wiki.openjdk.org/display/Build/Supported+Build+Platforms&quot;&gt;Supported
 609 Build Platforms&lt;/a&gt; OpenJDK Build Wiki page for details about which
 610 versions of XLC are supported.&lt;/p&gt;
 611 &lt;h2 id=&quot;boot-jdk-requirements&quot;&gt;Boot JDK Requirements&lt;/h2&gt;
 612 &lt;p&gt;Paradoxically, building the JDK requires a pre-existing JDK. This is
 613 called the &quot;boot JDK&quot;. The boot JDK does not, however, have to be a JDK
 614 built directly from the source code available in the OpenJDK Community.
 615 If you are porting the JDK to a new platform, chances are that there
 616 already exists another JDK for that platform that is usable as boot
 617 JDK.&lt;/p&gt;
 618 &lt;p&gt;The rule of thumb is that the boot JDK for building JDK major version
 619 &lt;em&gt;N&lt;/em&gt; should be a JDK of major version &lt;em&gt;N-1&lt;/em&gt;, so for
 620 building JDK 9 a JDK 8 would be suitable as boot JDK. However, the JDK
 621 should be able to &quot;build itself&quot;, so an up-to-date build of the current
 622 JDK source is an acceptable alternative. If you are following the
 623 &lt;em&gt;N-1&lt;/em&gt; rule, make sure you&#39;ve got the latest update version, since
 624 JDK 8 GA might not be able to build JDK 9 on all platforms.&lt;/p&gt;
 625 &lt;p&gt;Early in the release cycle, version &lt;em&gt;N-1&lt;/em&gt; may not yet have
 626 been released. In that case, the preferred boot JDK will be version
 627 &lt;em&gt;N-2&lt;/em&gt; until version &lt;em&gt;N-1&lt;/em&gt; is available.&lt;/p&gt;
 628 &lt;p&gt;If the boot JDK is not automatically detected, or the wrong JDK is
 629 picked, use &lt;code&gt;--with-boot-jdk&lt;/code&gt; to point to the JDK to use.&lt;/p&gt;
 630 &lt;h3 id=&quot;getting-jdk-binaries&quot;&gt;Getting JDK binaries&lt;/h3&gt;
 631 &lt;p&gt;JDK binaries for Linux, Windows and macOS can be downloaded from &lt;a
 632 href=&quot;http://jdk.java.net&quot;&gt;jdk.java.net&lt;/a&gt;. An alternative is to
 633 download the &lt;a
 634 href=&quot;http://www.oracle.com/technetwork/java/javase/downloads&quot;&gt;Oracle
 635 JDK&lt;/a&gt;. Another is the &lt;a href=&quot;https://adoptopenjdk.net/&quot;&gt;Adopt
 636 OpenJDK Project&lt;/a&gt;, which publishes experimental prebuilt binaries for
 637 various platforms.&lt;/p&gt;
 638 &lt;p&gt;On Linux you can also get a JDK from the Linux distribution. On
 639 apt-based distros (like Debian and Ubuntu),
 640 &lt;code&gt;sudo apt-get install openjdk-&amp;lt;VERSION&amp;gt;-jdk&lt;/code&gt; is
 641 typically enough to install a JDK &amp;lt;VERSION&amp;gt;. On rpm-based distros
 642 (like Fedora and Red Hat), try
 643 &lt;code&gt;sudo yum install java-&amp;lt;VERSION&amp;gt;-openjdk-devel&lt;/code&gt;.&lt;/p&gt;
 644 &lt;h2 id=&quot;external-library-requirements&quot;&gt;External Library
 645 Requirements&lt;/h2&gt;
 646 &lt;p&gt;Different platforms require different external libraries. In general,
 647 libraries are not optional - that is, they are either required or not
 648 used.&lt;/p&gt;
 649 &lt;p&gt;If a required library is not detected by &lt;code&gt;configure&lt;/code&gt;, you
 650 need to provide the path to it. There are two forms of the
 651 &lt;code&gt;configure&lt;/code&gt; arguments to point to an external library:
 652 &lt;code&gt;--with-&amp;lt;LIB&amp;gt;=&amp;lt;path&amp;gt;&lt;/code&gt; or
 653 &lt;code&gt;--with-&amp;lt;LIB&amp;gt;-include=&amp;lt;path to include&amp;gt; --with-&amp;lt;LIB&amp;gt;-lib=&amp;lt;path to lib&amp;gt;&lt;/code&gt;.
 654 The first variant is more concise, but require the include files and
 655 library files to reside in a default hierarchy under this directory. In
 656 most cases, it works fine.&lt;/p&gt;
 657 &lt;p&gt;As a fallback, the second version allows you to point to the include
 658 directory and the lib directory separately.&lt;/p&gt;
 659 &lt;h3 id=&quot;freetype&quot;&gt;FreeType&lt;/h3&gt;
 660 &lt;p&gt;FreeType2 from &lt;a href=&quot;http://www.freetype.org/&quot;&gt;The FreeType
 661 Project&lt;/a&gt; is not required on any platform. The exception is on
 662 Unix-based platforms when configuring such that the build artifacts will
 663 reference a system installed library, rather than bundling the JDK&#39;s own
 664 copy.&lt;/p&gt;
 665 &lt;ul&gt;
 666 &lt;li&gt;To install on an apt-based Linux, try running
 667 &lt;code&gt;sudo apt-get install     libfreetype6-dev&lt;/code&gt;.&lt;/li&gt;
 668 &lt;li&gt;To install on an rpm-based Linux, try running
 669 &lt;code&gt;sudo yum install     freetype-devel&lt;/code&gt;.&lt;/li&gt;
 670 &lt;li&gt;To install on Alpine Linux, try running
 671 &lt;code&gt;sudo apk add freetype-dev&lt;/code&gt;.&lt;/li&gt;
 672 &lt;li&gt;To install on macOS, try running
 673 &lt;code&gt;brew install freetype&lt;/code&gt;.&lt;/li&gt;
 674 &lt;/ul&gt;
 675 &lt;p&gt;Use &lt;code&gt;--with-freetype-include=&amp;lt;path&amp;gt;&lt;/code&gt; and
 676 &lt;code&gt;--with-freetype-lib=&amp;lt;path&amp;gt;&lt;/code&gt; if &lt;code&gt;configure&lt;/code&gt;
 677 does not automatically locate the platform FreeType files.&lt;/p&gt;
 678 &lt;h3 id=&quot;cups&quot;&gt;CUPS&lt;/h3&gt;
 679 &lt;p&gt;CUPS, &lt;a href=&quot;http://www.cups.org&quot;&gt;Common UNIX Printing System&lt;/a&gt;
 680 header files are required on all platforms, except Windows. Often these
 681 files are provided by your operating system.&lt;/p&gt;
 682 &lt;ul&gt;
 683 &lt;li&gt;To install on an apt-based Linux, try running
 684 &lt;code&gt;sudo apt-get install     libcups2-dev&lt;/code&gt;.&lt;/li&gt;
 685 &lt;li&gt;To install on an rpm-based Linux, try running
 686 &lt;code&gt;sudo yum install     cups-devel&lt;/code&gt;.&lt;/li&gt;
 687 &lt;li&gt;To install on Alpine Linux, try running
 688 &lt;code&gt;sudo apk add cups-dev&lt;/code&gt;.&lt;/li&gt;
 689 &lt;/ul&gt;
 690 &lt;p&gt;Use &lt;code&gt;--with-cups=&amp;lt;path&amp;gt;&lt;/code&gt; if &lt;code&gt;configure&lt;/code&gt;
 691 does not properly locate your CUPS files.&lt;/p&gt;
 692 &lt;h3 id=&quot;x11&quot;&gt;X11&lt;/h3&gt;
 693 &lt;p&gt;Certain &lt;a href=&quot;http://www.x.org/&quot;&gt;X11&lt;/a&gt; libraries and include
 694 files are required on Linux.&lt;/p&gt;
 695 &lt;ul&gt;
 696 &lt;li&gt;To install on an apt-based Linux, try running
 697 &lt;code&gt;sudo apt-get install     libx11-dev libxext-dev libxrender-dev libxrandr-dev libxtst-dev libxt-dev&lt;/code&gt;.&lt;/li&gt;
 698 &lt;li&gt;To install on an rpm-based Linux, try running
 699 &lt;code&gt;sudo yum install     libXtst-devel libXt-devel libXrender-devel libXrandr-devel libXi-devel&lt;/code&gt;.&lt;/li&gt;
 700 &lt;li&gt;To install on Alpine Linux, try running
 701 &lt;code&gt;sudo apk add libx11-dev     libxext-dev libxrender-dev libxrandr-dev libxtst-dev libxt-dev&lt;/code&gt;.&lt;/li&gt;
 702 &lt;/ul&gt;
 703 &lt;p&gt;Use &lt;code&gt;--with-x=&amp;lt;path&amp;gt;&lt;/code&gt; if &lt;code&gt;configure&lt;/code&gt; does
 704 not properly locate your X11 files.&lt;/p&gt;
 705 &lt;h3 id=&quot;alsa&quot;&gt;ALSA&lt;/h3&gt;
 706 &lt;p&gt;ALSA, &lt;a href=&quot;https://www.alsa-project.org/&quot;&gt;Advanced Linux Sound
 707 Architecture&lt;/a&gt; is required on Linux. At least version 0.9.1 of ALSA is
 708 required.&lt;/p&gt;
 709 &lt;ul&gt;
 710 &lt;li&gt;To install on an apt-based Linux, try running
 711 &lt;code&gt;sudo apt-get install     libasound2-dev&lt;/code&gt;.&lt;/li&gt;
 712 &lt;li&gt;To install on an rpm-based Linux, try running
 713 &lt;code&gt;sudo yum install     alsa-lib-devel&lt;/code&gt;.&lt;/li&gt;
 714 &lt;li&gt;To install on Alpine Linux, try running
 715 &lt;code&gt;sudo apk add alsa-lib-dev&lt;/code&gt;.&lt;/li&gt;
 716 &lt;/ul&gt;
 717 &lt;p&gt;Use &lt;code&gt;--with-alsa=&amp;lt;path&amp;gt;&lt;/code&gt; if &lt;code&gt;configure&lt;/code&gt;
 718 does not properly locate your ALSA files.&lt;/p&gt;
 719 &lt;h3 id=&quot;libffi&quot;&gt;libffi&lt;/h3&gt;
 720 &lt;p&gt;libffi, the &lt;a href=&quot;http://sourceware.org/libffi&quot;&gt;Portable Foreign
 721 Function Interface Library&lt;/a&gt; is required when building the Zero
 722 version of Hotspot.&lt;/p&gt;
 723 &lt;ul&gt;
 724 &lt;li&gt;To install on an apt-based Linux, try running
 725 &lt;code&gt;sudo apt-get install     libffi-dev&lt;/code&gt;.&lt;/li&gt;
 726 &lt;li&gt;To install on an rpm-based Linux, try running
 727 &lt;code&gt;sudo yum install     libffi-devel&lt;/code&gt;.&lt;/li&gt;
 728 &lt;li&gt;To install on Alpine Linux, try running
 729 &lt;code&gt;sudo apk add libffi-dev&lt;/code&gt;.&lt;/li&gt;
 730 &lt;/ul&gt;
 731 &lt;p&gt;Use &lt;code&gt;--with-libffi=&amp;lt;path&amp;gt;&lt;/code&gt; if &lt;code&gt;configure&lt;/code&gt;
 732 does not properly locate your libffi files.&lt;/p&gt;
 733 &lt;h2 id=&quot;build-tools-requirements&quot;&gt;Build Tools Requirements&lt;/h2&gt;
 734 &lt;h3 id=&quot;autoconf&quot;&gt;Autoconf&lt;/h3&gt;
 735 &lt;p&gt;The JDK requires &lt;a
 736 href=&quot;http://www.gnu.org/software/autoconf&quot;&gt;Autoconf&lt;/a&gt; on all
 737 platforms. At least version 2.69 is required.&lt;/p&gt;
 738 &lt;ul&gt;
 739 &lt;li&gt;To install on an apt-based Linux, try running
 740 &lt;code&gt;sudo apt-get install     autoconf&lt;/code&gt;.&lt;/li&gt;
 741 &lt;li&gt;To install on an rpm-based Linux, try running
 742 &lt;code&gt;sudo yum install     autoconf&lt;/code&gt;.&lt;/li&gt;
 743 &lt;li&gt;To install on Alpine Linux, try running
 744 &lt;code&gt;sudo apk add autoconf&lt;/code&gt;.&lt;/li&gt;
 745 &lt;li&gt;To install on macOS, try running
 746 &lt;code&gt;brew install autoconf&lt;/code&gt;.&lt;/li&gt;
 747 &lt;li&gt;To install on Windows, try running
 748 &lt;code&gt;&amp;lt;path to Cygwin setup&amp;gt;/setup-x86_64 -q     -P autoconf&lt;/code&gt;.&lt;/li&gt;
 749 &lt;/ul&gt;
 750 &lt;p&gt;If &lt;code&gt;configure&lt;/code&gt; has problems locating your installation of
 751 autoconf, you can specify it using the &lt;code&gt;AUTOCONF&lt;/code&gt; environment
 752 variable, like this:&lt;/p&gt;
 753 &lt;pre&gt;&lt;code&gt;AUTOCONF=&amp;lt;path to autoconf&amp;gt; configure ...&lt;/code&gt;&lt;/pre&gt;
 754 &lt;h3 id=&quot;gnu-make&quot;&gt;GNU Make&lt;/h3&gt;
 755 &lt;p&gt;The JDK requires &lt;a href=&quot;http://www.gnu.org/software/make&quot;&gt;GNU
 756 Make&lt;/a&gt;. No other flavors of make are supported.&lt;/p&gt;
 757 &lt;p&gt;At least version 3.81 of GNU Make must be used. For distributions
 758 supporting GNU Make 4.0 or above, we strongly recommend it. GNU Make 4.0
 759 contains useful functionality to handle parallel building (supported by
 760 &lt;code&gt;--with-output-sync&lt;/code&gt;) and speed and stability
 761 improvements.&lt;/p&gt;
 762 &lt;p&gt;Note that &lt;code&gt;configure&lt;/code&gt; locates and verifies a properly
 763 functioning version of &lt;code&gt;make&lt;/code&gt; and stores the path to this
 764 &lt;code&gt;make&lt;/code&gt; binary in the configuration. If you start a build
 765 using &lt;code&gt;make&lt;/code&gt; on the command line, you will be using the
 766 version of make found first in your &lt;code&gt;PATH&lt;/code&gt;, and not
 767 necessarily the one stored in the configuration. This initial make will
 768 be used as &quot;bootstrap make&quot;, and in a second stage, the make located by
 769 &lt;code&gt;configure&lt;/code&gt; will be called. Normally, this will present no
 770 issues, but if you have a very old &lt;code&gt;make&lt;/code&gt;, or a non-GNU Make
 771 &lt;code&gt;make&lt;/code&gt; in your path, this might cause issues.&lt;/p&gt;
 772 &lt;p&gt;If you want to override the default make found by
 773 &lt;code&gt;configure&lt;/code&gt;, use the &lt;code&gt;MAKE&lt;/code&gt; configure variable,
 774 e.g. &lt;code&gt;configure MAKE=/opt/gnu/make&lt;/code&gt;.&lt;/p&gt;
 775 &lt;h3 id=&quot;gnu-bash&quot;&gt;GNU Bash&lt;/h3&gt;
 776 &lt;p&gt;The JDK requires &lt;a href=&quot;http://www.gnu.org/software/bash&quot;&gt;GNU
 777 Bash&lt;/a&gt;. No other shells are supported.&lt;/p&gt;
 778 &lt;p&gt;At least version 3.2 of GNU Bash must be used.&lt;/p&gt;
 779 &lt;h2 id=&quot;running-configure&quot;&gt;Running Configure&lt;/h2&gt;
 780 &lt;p&gt;To build the JDK, you need a &quot;configuration&quot;, which consists of a
 781 directory where to store the build output, coupled with information
 782 about the platform, the specific build machine, and choices that affect
 783 how the JDK is built.&lt;/p&gt;
 784 &lt;p&gt;The configuration is created by the &lt;code&gt;configure&lt;/code&gt; script.
 785 The basic invocation of the &lt;code&gt;configure&lt;/code&gt; script looks like
 786 this:&lt;/p&gt;
 787 &lt;pre&gt;&lt;code&gt;bash configure [options]&lt;/code&gt;&lt;/pre&gt;
 788 &lt;p&gt;This will create an output directory containing the configuration and
 789 setup an area for the build result. This directory typically looks like
 790 &lt;code&gt;build/linux-x64-server-release&lt;/code&gt;, but the actual name depends
 791 on your specific configuration. (It can also be set directly, see &lt;a
 792 href=&quot;#using-multiple-configurations&quot;&gt;Using Multiple
 793 Configurations&lt;/a&gt;). This directory is referred to as
 794 &lt;code&gt;$BUILD&lt;/code&gt; in this documentation.&lt;/p&gt;
 795 &lt;p&gt;&lt;code&gt;configure&lt;/code&gt; will try to figure out what system you are
 796 running on and where all necessary build components are. If you have all
 797 prerequisites for building installed, it should find everything. If it
 798 fails to detect any component automatically, it will exit and inform you
 799 about the problem.&lt;/p&gt;
 800 &lt;p&gt;Some command line examples:&lt;/p&gt;
 801 &lt;ul&gt;
 802 &lt;li&gt;&lt;p&gt;Create a 32-bit build for Windows with FreeType2 in
 803 &lt;code&gt;C:\freetype-i586&lt;/code&gt;:
 804 &lt;code&gt;bash configure --with-freetype=/cygdrive/c/freetype-i586 --with-target-bits=32&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
 805 &lt;li&gt;&lt;p&gt;Create a debug build with the &lt;code&gt;server&lt;/code&gt; JVM and DTrace
 806 enabled:
 807 &lt;code&gt;bash configure --enable-debug --with-jvm-variants=server --enable-dtrace&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
 808 &lt;/ul&gt;
 809 &lt;h3 id=&quot;common-configure-arguments&quot;&gt;Common Configure Arguments&lt;/h3&gt;
 810 &lt;p&gt;Here follows some of the most common and important
 811 &lt;code&gt;configure&lt;/code&gt; argument.&lt;/p&gt;
 812 &lt;p&gt;To get up-to-date information on &lt;em&gt;all&lt;/em&gt; available
 813 &lt;code&gt;configure&lt;/code&gt; argument, please run:&lt;/p&gt;
 814 &lt;pre&gt;&lt;code&gt;bash configure --help&lt;/code&gt;&lt;/pre&gt;
 815 &lt;p&gt;(Note that this help text also include general autoconf options, like
 816 &lt;code&gt;--dvidir&lt;/code&gt;, that is not relevant to the JDK. To list only
 817 JDK-specific features, use &lt;code&gt;bash configure --help=short&lt;/code&gt;
 818 instead.)&lt;/p&gt;
 819 &lt;h4 id=&quot;configure-arguments-for-tailoring-the-build&quot;&gt;Configure Arguments
 820 for Tailoring the Build&lt;/h4&gt;
 821 &lt;ul&gt;
 822 &lt;li&gt;&lt;code&gt;--enable-debug&lt;/code&gt; - Set the debug level to
 823 &lt;code&gt;fastdebug&lt;/code&gt; (this is a shorthand for
 824 &lt;code&gt;--with-debug-level=fastdebug&lt;/code&gt;)&lt;/li&gt;
 825 &lt;li&gt;&lt;code&gt;--with-debug-level=&amp;lt;level&amp;gt;&lt;/code&gt; - Set the debug level,
 826 which can be &lt;code&gt;release&lt;/code&gt;, &lt;code&gt;fastdebug&lt;/code&gt;,
 827 &lt;code&gt;slowdebug&lt;/code&gt; or &lt;code&gt;optimized&lt;/code&gt;. Default is
 828 &lt;code&gt;release&lt;/code&gt;. &lt;code&gt;optimized&lt;/code&gt; is variant of
 829 &lt;code&gt;release&lt;/code&gt; with additional Hotspot debug code.&lt;/li&gt;
 830 &lt;li&gt;&lt;code&gt;--with-native-debug-symbols=&amp;lt;method&amp;gt;&lt;/code&gt; - Specify if
 831 and how native debug symbols should be built. Available methods are
 832 &lt;code&gt;none&lt;/code&gt;, &lt;code&gt;internal&lt;/code&gt;, &lt;code&gt;external&lt;/code&gt;,
 833 &lt;code&gt;zipped&lt;/code&gt;. Default behavior depends on platform. See &lt;a
 834 href=&quot;#native-debug-symbols&quot;&gt;Native Debug Symbols&lt;/a&gt; for more
 835 details.&lt;/li&gt;
 836 &lt;li&gt;&lt;code&gt;--with-version-string=&amp;lt;string&amp;gt;&lt;/code&gt; - Specify the
 837 version string this build will be identified with.&lt;/li&gt;
 838 &lt;li&gt;&lt;code&gt;--with-version-&amp;lt;part&amp;gt;=&amp;lt;value&amp;gt;&lt;/code&gt; - A group of
 839 options, where &lt;code&gt;&amp;lt;part&amp;gt;&lt;/code&gt; can be any of &lt;code&gt;pre&lt;/code&gt;,
 840 &lt;code&gt;opt&lt;/code&gt;, &lt;code&gt;build&lt;/code&gt;, &lt;code&gt;major&lt;/code&gt;,
 841 &lt;code&gt;minor&lt;/code&gt;, &lt;code&gt;security&lt;/code&gt; or &lt;code&gt;patch&lt;/code&gt;. Use
 842 these options to modify just the corresponding part of the version
 843 string from the default, or the value provided by
 844 &lt;code&gt;--with-version-string&lt;/code&gt;.&lt;/li&gt;
 845 &lt;li&gt;&lt;code&gt;--with-jvm-variants=&amp;lt;variant&amp;gt;[,&amp;lt;variant&amp;gt;...]&lt;/code&gt;
 846 - Build the specified variant (or variants) of Hotspot. Valid variants
 847 are: &lt;code&gt;server&lt;/code&gt;, &lt;code&gt;client&lt;/code&gt;, &lt;code&gt;minimal&lt;/code&gt;,
 848 &lt;code&gt;core&lt;/code&gt;, &lt;code&gt;zero&lt;/code&gt;, &lt;code&gt;custom&lt;/code&gt;. Note that not
 849 all variants are possible to combine in a single build.&lt;/li&gt;
 850 &lt;li&gt;&lt;code&gt;--enable-jvm-feature-&amp;lt;feature&amp;gt;&lt;/code&gt; or
 851 &lt;code&gt;--disable-jvm-feature-&amp;lt;feature&amp;gt;&lt;/code&gt; - Include (or
 852 exclude) &lt;code&gt;&amp;lt;feature&amp;gt;&lt;/code&gt; as a JVM feature in Hotspot. You
 853 can also specify a list of features to be enabled, separated by space or
 854 comma, as
 855 &lt;code&gt;--with-jvm-features=&amp;lt;feature&amp;gt;[,&amp;lt;feature&amp;gt;...]&lt;/code&gt;.
 856 If you prefix &lt;code&gt;&amp;lt;feature&amp;gt;&lt;/code&gt; with a &lt;code&gt;-&lt;/code&gt;, it
 857 will be disabled. These options will modify the default list of features
 858 for the JVM variant(s) you are building. For the &lt;code&gt;custom&lt;/code&gt; JVM
 859 variant, the default list is empty. A complete list of valid JVM
 860 features can be found using &lt;code&gt;bash configure --help&lt;/code&gt;.&lt;/li&gt;
 861 &lt;li&gt;&lt;code&gt;--with-target-bits=&amp;lt;bits&amp;gt;&lt;/code&gt; - Create a target
 862 binary suitable for running on a &lt;code&gt;&amp;lt;bits&amp;gt;&lt;/code&gt; platform. Use
 863 this to create 32-bit output on a 64-bit build platform, instead of
 864 doing a full cross-compile. (This is known as a &lt;em&gt;reduced&lt;/em&gt;
 865 build.)&lt;/li&gt;
 866 &lt;/ul&gt;
 867 &lt;p&gt;On Linux, BSD and AIX, it is possible to override where Java by
 868 default searches for runtime/JNI libraries. This can be useful in
 869 situations where there is a special shared directory for system JNI
 870 libraries. This setting can in turn be overridden at runtime by setting
 871 the &lt;code&gt;java.library.path&lt;/code&gt; property.&lt;/p&gt;
 872 &lt;ul&gt;
 873 &lt;li&gt;&lt;code&gt;--with-jni-libpath=&amp;lt;path&amp;gt;&lt;/code&gt; - Use the specified
 874 path as a default when searching for runtime libraries.&lt;/li&gt;
 875 &lt;/ul&gt;
 876 &lt;h4 id=&quot;configure-arguments-for-native-compilation&quot;&gt;Configure Arguments
 877 for Native Compilation&lt;/h4&gt;
 878 &lt;ul&gt;
 879 &lt;li&gt;&lt;code&gt;--with-devkit=&amp;lt;path&amp;gt;&lt;/code&gt; - Use this devkit for
 880 compilers, tools and resources&lt;/li&gt;
 881 &lt;li&gt;&lt;code&gt;--with-sysroot=&amp;lt;path&amp;gt;&lt;/code&gt; - Use this directory as
 882 sysroot&lt;/li&gt;
 883 &lt;li&gt;&lt;code&gt;--with-extra-path=&amp;lt;path&amp;gt;[;&amp;lt;path&amp;gt;]&lt;/code&gt; - Prepend
 884 these directories to the default path when searching for all kinds of
 885 binaries&lt;/li&gt;
 886 &lt;li&gt;&lt;code&gt;--with-toolchain-path=&amp;lt;path&amp;gt;[;&amp;lt;path&amp;gt;]&lt;/code&gt; -
 887 Prepend these directories when searching for toolchain binaries
 888 (compilers etc)&lt;/li&gt;
 889 &lt;li&gt;&lt;code&gt;--with-extra-cflags=&amp;lt;flags&amp;gt;&lt;/code&gt; - Append these flags
 890 when compiling JDK C files&lt;/li&gt;
 891 &lt;li&gt;&lt;code&gt;--with-extra-cxxflags=&amp;lt;flags&amp;gt;&lt;/code&gt; - Append these
 892 flags when compiling JDK C++ files&lt;/li&gt;
 893 &lt;li&gt;&lt;code&gt;--with-extra-ldflags=&amp;lt;flags&amp;gt;&lt;/code&gt; - Append these flags
 894 when linking JDK libraries&lt;/li&gt;
 895 &lt;/ul&gt;
 896 &lt;h4 id=&quot;configure-arguments-for-external-dependencies&quot;&gt;Configure
 897 Arguments for External Dependencies&lt;/h4&gt;
 898 &lt;ul&gt;
 899 &lt;li&gt;&lt;code&gt;--with-boot-jdk=&amp;lt;path&amp;gt;&lt;/code&gt; - Set the path to the &lt;a
 900 href=&quot;#boot-jdk-requirements&quot;&gt;Boot JDK&lt;/a&gt;&lt;/li&gt;
 901 &lt;li&gt;&lt;code&gt;--with-freetype=&amp;lt;path&amp;gt;&lt;/code&gt; - Set the path to &lt;a
 902 href=&quot;#freetype&quot;&gt;FreeType&lt;/a&gt;&lt;/li&gt;
 903 &lt;li&gt;&lt;code&gt;--with-cups=&amp;lt;path&amp;gt;&lt;/code&gt; - Set the path to &lt;a
 904 href=&quot;#cups&quot;&gt;CUPS&lt;/a&gt;&lt;/li&gt;
 905 &lt;li&gt;&lt;code&gt;--with-x=&amp;lt;path&amp;gt;&lt;/code&gt; - Set the path to &lt;a
 906 href=&quot;#x11&quot;&gt;X11&lt;/a&gt;&lt;/li&gt;
 907 &lt;li&gt;&lt;code&gt;--with-alsa=&amp;lt;path&amp;gt;&lt;/code&gt; - Set the path to &lt;a
 908 href=&quot;#alsa&quot;&gt;ALSA&lt;/a&gt;&lt;/li&gt;
 909 &lt;li&gt;&lt;code&gt;--with-libffi=&amp;lt;path&amp;gt;&lt;/code&gt; - Set the path to &lt;a
 910 href=&quot;#libffi&quot;&gt;libffi&lt;/a&gt;&lt;/li&gt;
 911 &lt;li&gt;&lt;code&gt;--with-jtreg=&amp;lt;path&amp;gt;&lt;/code&gt; - Set the path to JTReg. See
 912 &lt;a href=&quot;#running-tests&quot;&gt;Running Tests&lt;/a&gt;&lt;/li&gt;
 913 &lt;/ul&gt;
 914 &lt;p&gt;Certain third-party libraries used by the JDK (libjpeg, giflib,
 915 libpng, lcms and zlib) are included in the JDK repository. The default
 916 behavior of the JDK build is to use the included (&quot;bundled&quot;) versions of
 917 libjpeg, giflib, libpng and lcms. For zlib, the system lib (if present)
 918 is used except on Windows and AIX. However the bundled libraries may be
 919 replaced by an external version. To do so, specify &lt;code&gt;system&lt;/code&gt;
 920 as the &lt;code&gt;&amp;lt;source&amp;gt;&lt;/code&gt; option in these arguments. (The
 921 default is &lt;code&gt;bundled&lt;/code&gt;).&lt;/p&gt;
 922 &lt;ul&gt;
 923 &lt;li&gt;&lt;code&gt;--with-libjpeg=&amp;lt;source&amp;gt;&lt;/code&gt; - Use the specified
 924 source for libjpeg&lt;/li&gt;
 925 &lt;li&gt;&lt;code&gt;--with-giflib=&amp;lt;source&amp;gt;&lt;/code&gt; - Use the specified source
 926 for giflib&lt;/li&gt;
 927 &lt;li&gt;&lt;code&gt;--with-libpng=&amp;lt;source&amp;gt;&lt;/code&gt; - Use the specified source
 928 for libpng&lt;/li&gt;
 929 &lt;li&gt;&lt;code&gt;--with-lcms=&amp;lt;source&amp;gt;&lt;/code&gt; - Use the specified source
 930 for lcms&lt;/li&gt;
 931 &lt;li&gt;&lt;code&gt;--with-zlib=&amp;lt;source&amp;gt;&lt;/code&gt; - Use the specified source
 932 for zlib&lt;/li&gt;
 933 &lt;/ul&gt;
 934 &lt;p&gt;On Linux, it is possible to select either static or dynamic linking
 935 of the C++ runtime. The default is static linking, with dynamic linking
 936 as fallback if the static library is not found.&lt;/p&gt;
 937 &lt;ul&gt;
 938 &lt;li&gt;&lt;code&gt;--with-stdc++lib=&amp;lt;method&amp;gt;&lt;/code&gt; - Use the specified
 939 method (&lt;code&gt;static&lt;/code&gt;, &lt;code&gt;dynamic&lt;/code&gt; or
 940 &lt;code&gt;default&lt;/code&gt;) for linking the C++ runtime.&lt;/li&gt;
 941 &lt;/ul&gt;
 942 &lt;h3 id=&quot;configure-control-variables&quot;&gt;Configure Control Variables&lt;/h3&gt;
 943 &lt;p&gt;It is possible to control certain aspects of &lt;code&gt;configure&lt;/code&gt;
 944 by overriding the value of &lt;code&gt;configure&lt;/code&gt; variables, either on
 945 the command line or in the environment.&lt;/p&gt;
 946 &lt;p&gt;Normally, this is &lt;strong&gt;not recommended&lt;/strong&gt;. If used
 947 improperly, it can lead to a broken configuration. Unless you&#39;re well
 948 versed in the build system, this is hard to use properly. Therefore,
 949 &lt;code&gt;configure&lt;/code&gt; will print a warning if this is detected.&lt;/p&gt;
 950 &lt;p&gt;However, there are a few &lt;code&gt;configure&lt;/code&gt; variables, known as
 951 &lt;em&gt;control variables&lt;/em&gt; that are supposed to be overridden on the
 952 command line. These are variables that describe the location of tools
 953 needed by the build, like &lt;code&gt;MAKE&lt;/code&gt; or &lt;code&gt;GREP&lt;/code&gt;. If any
 954 such variable is specified, &lt;code&gt;configure&lt;/code&gt; will use that value
 955 instead of trying to autodetect the tool. For instance,
 956 &lt;code&gt;bash configure MAKE=/opt/gnumake4.0/bin/make&lt;/code&gt;.&lt;/p&gt;
 957 &lt;p&gt;If a configure argument exists, use that instead, e.g. use
 958 &lt;code&gt;--with-jtreg&lt;/code&gt; instead of setting &lt;code&gt;JTREGEXE&lt;/code&gt;.&lt;/p&gt;
 959 &lt;p&gt;Also note that, despite what autoconf claims, setting
 960 &lt;code&gt;CFLAGS&lt;/code&gt; will not accomplish anything. Instead use
 961 &lt;code&gt;--with-extra-cflags&lt;/code&gt; (and similar for &lt;code&gt;cxxflags&lt;/code&gt;
 962 and &lt;code&gt;ldflags&lt;/code&gt;).&lt;/p&gt;
 963 &lt;h2 id=&quot;running-make&quot;&gt;Running Make&lt;/h2&gt;
 964 &lt;p&gt;When you have a proper configuration, all you need to do to build the
 965 JDK is to run &lt;code&gt;make&lt;/code&gt;. (But see the warning at &lt;a
 966 href=&quot;#gnu-make&quot;&gt;GNU Make&lt;/a&gt; about running the correct version of
 967 make.)&lt;/p&gt;
 968 &lt;p&gt;When running &lt;code&gt;make&lt;/code&gt; without any arguments, the default
 969 target is used, which is the same as running &lt;code&gt;make default&lt;/code&gt;
 970 or &lt;code&gt;make jdk&lt;/code&gt;. This will build a minimal (or roughly minimal)
 971 set of compiled output (known as an &quot;exploded image&quot;) needed for a
 972 developer to actually execute the newly built JDK. The idea is that in
 973 an incremental development fashion, when doing a normal make, you should
 974 only spend time recompiling what&#39;s changed (making it purely
 975 incremental) and only do the work that&#39;s needed to actually run and test
 976 your code.&lt;/p&gt;
 977 &lt;p&gt;The output of the exploded image resides in &lt;code&gt;$BUILD/jdk&lt;/code&gt;.
 978 You can test the newly built JDK like this:
 979 &lt;code&gt;$BUILD/jdk/bin/java -version&lt;/code&gt;.&lt;/p&gt;
 980 &lt;h3 id=&quot;common-make-targets&quot;&gt;Common Make Targets&lt;/h3&gt;
 981 &lt;p&gt;Apart from the default target, here are some common make targets:&lt;/p&gt;
 982 &lt;ul&gt;
 983 &lt;li&gt;&lt;code&gt;hotspot&lt;/code&gt; - Build all of hotspot (but only hotspot)&lt;/li&gt;
 984 &lt;li&gt;&lt;code&gt;hotspot-&amp;lt;variant&amp;gt;&lt;/code&gt; - Build just the specified jvm
 985 variant&lt;/li&gt;
 986 &lt;li&gt;&lt;code&gt;images&lt;/code&gt; or &lt;code&gt;product-images&lt;/code&gt; - Build the JDK
 987 image&lt;/li&gt;
 988 &lt;li&gt;&lt;code&gt;docs&lt;/code&gt; or &lt;code&gt;docs-image&lt;/code&gt; - Build the
 989 documentation image&lt;/li&gt;
 990 &lt;li&gt;&lt;code&gt;test-image&lt;/code&gt; - Build the test image&lt;/li&gt;
 991 &lt;li&gt;&lt;code&gt;all&lt;/code&gt; or &lt;code&gt;all-images&lt;/code&gt; - Build all images
 992 (product, docs and test)&lt;/li&gt;
 993 &lt;li&gt;&lt;code&gt;bootcycle-images&lt;/code&gt; - Build images twice, second time with
 994 newly built JDK (good for testing)&lt;/li&gt;
 995 &lt;li&gt;&lt;code&gt;clean&lt;/code&gt; - Remove all files generated by make, but not
 996 those generated by configure&lt;/li&gt;
 997 &lt;li&gt;&lt;code&gt;dist-clean&lt;/code&gt; - Remove all files, including
 998 configuration&lt;/li&gt;
 999 &lt;/ul&gt;
1000 &lt;p&gt;Run &lt;code&gt;make help&lt;/code&gt; to get an up-to-date list of important
1001 make targets and make control variables.&lt;/p&gt;
1002 &lt;p&gt;It is possible to build just a single module, a single phase, or a
1003 single phase of a single module, by creating make targets according to
1004 these followin patterns. A phase can be either of &lt;code&gt;gensrc&lt;/code&gt;,
1005 &lt;code&gt;gendata&lt;/code&gt;, &lt;code&gt;copy&lt;/code&gt;, &lt;code&gt;java&lt;/code&gt;,
1006 &lt;code&gt;launchers&lt;/code&gt;, or &lt;code&gt;libs&lt;/code&gt;. See &lt;a
1007 href=&quot;#using-fine-grained-make-targets&quot;&gt;Using Fine-Grained Make
1008 Targets&lt;/a&gt; for more details about this functionality.&lt;/p&gt;
1009 &lt;ul&gt;
1010 &lt;li&gt;&lt;code&gt;&amp;lt;phase&amp;gt;&lt;/code&gt; - Build the specified phase and
1011 everything it depends on&lt;/li&gt;
1012 &lt;li&gt;&lt;code&gt;&amp;lt;module&amp;gt;&lt;/code&gt; - Build the specified module and
1013 everything it depends on&lt;/li&gt;
1014 &lt;li&gt;&lt;code&gt;&amp;lt;module&amp;gt;-&amp;lt;phase&amp;gt;&lt;/code&gt; - Compile the specified
1015 phase for the specified module and everything it depends on&lt;/li&gt;
1016 &lt;/ul&gt;
1017 &lt;p&gt;Similarly, it is possible to clean just a part of the build by
1018 creating make targets according to these patterns:&lt;/p&gt;
1019 &lt;ul&gt;
1020 &lt;li&gt;&lt;code&gt;clean-&amp;lt;outputdir&amp;gt;&lt;/code&gt; - Remove the subdir in the
1021 output dir with the name&lt;/li&gt;
1022 &lt;li&gt;&lt;code&gt;clean-&amp;lt;phase&amp;gt;&lt;/code&gt; - Remove all build results related
1023 to a certain build phase&lt;/li&gt;
1024 &lt;li&gt;&lt;code&gt;clean-&amp;lt;module&amp;gt;&lt;/code&gt; - Remove all build results related
1025 to a certain module&lt;/li&gt;
1026 &lt;li&gt;&lt;code&gt;clean-&amp;lt;module&amp;gt;-&amp;lt;phase&amp;gt;&lt;/code&gt; - Remove all build
1027 results related to a certain module and phase&lt;/li&gt;
1028 &lt;/ul&gt;
1029 &lt;h3 id=&quot;make-control-variables&quot;&gt;Make Control Variables&lt;/h3&gt;
1030 &lt;p&gt;It is possible to control &lt;code&gt;make&lt;/code&gt; behavior by overriding
1031 the value of &lt;code&gt;make&lt;/code&gt; variables, either on the command line or
1032 in the environment.&lt;/p&gt;
1033 &lt;p&gt;Normally, this is &lt;strong&gt;not recommended&lt;/strong&gt;. If used
1034 improperly, it can lead to a broken build. Unless you&#39;re well versed in
1035 the build system, this is hard to use properly. Therefore,
1036 &lt;code&gt;make&lt;/code&gt; will print a warning if this is detected.&lt;/p&gt;
1037 &lt;p&gt;However, there are a few &lt;code&gt;make&lt;/code&gt; variables, known as
1038 &lt;em&gt;control variables&lt;/em&gt; that are supposed to be overridden on the
1039 command line. These make up the &quot;make time&quot; configuration, as opposed to
1040 the &quot;configure time&quot; configuration.&lt;/p&gt;
1041 &lt;h4 id=&quot;general-make-control-variables&quot;&gt;General Make Control
1042 Variables&lt;/h4&gt;
1043 &lt;ul&gt;
1044 &lt;li&gt;&lt;code&gt;JOBS&lt;/code&gt; - Specify the number of jobs to build with. See &lt;a
1045 href=&quot;#build-performance&quot;&gt;Build Performance&lt;/a&gt;.&lt;/li&gt;
1046 &lt;li&gt;&lt;code&gt;LOG&lt;/code&gt; - Specify the logging level and functionality. See
1047 &lt;a href=&quot;#checking-the-build-log-file&quot;&gt;Checking the Build Log
1048 File&lt;/a&gt;&lt;/li&gt;
1049 &lt;li&gt;&lt;code&gt;CONF&lt;/code&gt; and &lt;code&gt;CONF_NAME&lt;/code&gt; - Selecting the
1050 configuration(s) to use. See &lt;a
1051 href=&quot;#using-multiple-configurations&quot;&gt;Using Multiple
1052 Configurations&lt;/a&gt;&lt;/li&gt;
1053 &lt;/ul&gt;
1054 &lt;h4 id=&quot;test-make-control-variables&quot;&gt;Test Make Control Variables&lt;/h4&gt;
1055 &lt;p&gt;These make control variables only make sense when running tests.
1056 Please see &lt;strong&gt;Testing the JDK&lt;/strong&gt; (&lt;a
1057 href=&quot;testing.html&quot;&gt;html&lt;/a&gt;, &lt;a href=&quot;testing.md&quot;&gt;markdown&lt;/a&gt;) for
1058 details.&lt;/p&gt;
1059 &lt;ul&gt;
1060 &lt;li&gt;&lt;code&gt;TEST&lt;/code&gt;&lt;/li&gt;
1061 &lt;li&gt;&lt;code&gt;TEST_JOBS&lt;/code&gt;&lt;/li&gt;
1062 &lt;li&gt;&lt;code&gt;JTREG&lt;/code&gt;&lt;/li&gt;
1063 &lt;li&gt;&lt;code&gt;GTEST&lt;/code&gt;&lt;/li&gt;
1064 &lt;/ul&gt;
1065 &lt;h4 id=&quot;advanced-make-control-variables&quot;&gt;Advanced Make Control
1066 Variables&lt;/h4&gt;
1067 &lt;p&gt;These advanced make control variables can be potentially unsafe. See
1068 &lt;a href=&quot;#hints-and-suggestions-for-advanced-users&quot;&gt;Hints and
1069 Suggestions for Advanced Users&lt;/a&gt; and &lt;a
1070 href=&quot;#understanding-the-build-system&quot;&gt;Understanding the Build
1071 System&lt;/a&gt; for details.&lt;/p&gt;
1072 &lt;ul&gt;
1073 &lt;li&gt;&lt;code&gt;SPEC&lt;/code&gt;&lt;/li&gt;
1074 &lt;li&gt;&lt;code&gt;CONF_CHECK&lt;/code&gt;&lt;/li&gt;
1075 &lt;li&gt;&lt;code&gt;COMPARE_BUILD&lt;/code&gt;&lt;/li&gt;
1076 &lt;li&gt;&lt;code&gt;JDK_FILTER&lt;/code&gt;&lt;/li&gt;
1077 &lt;li&gt;&lt;code&gt;SPEC_FILTER&lt;/code&gt;&lt;/li&gt;
1078 &lt;/ul&gt;
1079 &lt;h2 id=&quot;running-tests&quot;&gt;Running Tests&lt;/h2&gt;
1080 &lt;p&gt;Most of the JDK tests are using the &lt;a
1081 href=&quot;http://openjdk.org/jtreg&quot;&gt;JTReg&lt;/a&gt; test framework. Make sure that
1082 your configuration knows where to find your installation of JTReg. If
1083 this is not picked up automatically, use the
1084 &lt;code&gt;--with-jtreg=&amp;lt;path to jtreg home&amp;gt;&lt;/code&gt; option to point to
1085 the JTReg framework. Note that this option should point to the JTReg
1086 home, i.e. the top directory, containing &lt;code&gt;lib/jtreg.jar&lt;/code&gt;
1087 etc.&lt;/p&gt;
1088 &lt;p&gt;The &lt;a href=&quot;https://wiki.openjdk.org/display/Adoption&quot;&gt;Adoption
1089 Group&lt;/a&gt; provides recent builds of jtreg &lt;a
1090 href=&quot;https://ci.adoptopenjdk.net/view/Dependencies/job/dependency_pipeline/lastSuccessfulBuild/artifact/jtreg/&quot;&gt;here&lt;/a&gt;.
1091 Download the latest &lt;code&gt;.tar.gz&lt;/code&gt; file, unpack it, and point
1092 &lt;code&gt;--with-jtreg&lt;/code&gt; to the &lt;code&gt;jtreg&lt;/code&gt; directory that you
1093 just unpacked.&lt;/p&gt;
1094 &lt;p&gt;Building of Hotspot Gtest suite requires the source code of Google
1095 Test framework. The top directory, which contains both
1096 &lt;code&gt;googletest&lt;/code&gt; and &lt;code&gt;googlemock&lt;/code&gt; directories, should
1097 be specified via &lt;code&gt;--with-gtest&lt;/code&gt;. The minimum supported
1098 version of Google Test is 1.13.0, whose source code can be obtained:&lt;/p&gt;
1099 &lt;ul&gt;
1100 &lt;li&gt;by downloading and unpacking the source bundle from &lt;a
1101 href=&quot;https://github.com/google/googletest/releases/tag/v1.13.0&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
1102 &lt;li&gt;or by checking out &lt;code&gt;v1.13.0&lt;/code&gt; tag of
1103 &lt;code&gt;googletest&lt;/code&gt; project:
1104 &lt;code&gt;git clone -b v1.13.0 https://github.com/google/googletest&lt;/code&gt;&lt;/li&gt;
1105 &lt;/ul&gt;
1106 &lt;p&gt;To execute the most basic tests (tier 1), use:&lt;/p&gt;
1107 &lt;pre&gt;&lt;code&gt;make run-test-tier1&lt;/code&gt;&lt;/pre&gt;
1108 &lt;p&gt;For more details on how to run tests, please see &lt;strong&gt;Testing the
1109 JDK&lt;/strong&gt; (&lt;a href=&quot;testing.html&quot;&gt;html&lt;/a&gt;, &lt;a
1110 href=&quot;testing.md&quot;&gt;markdown&lt;/a&gt;).&lt;/p&gt;
1111 &lt;h2 id=&quot;signing&quot;&gt;Signing&lt;/h2&gt;
1112 &lt;h3 id=&quot;macos-1&quot;&gt;macOS&lt;/h3&gt;
1113 &lt;p&gt;Modern versions of macOS require applications to be signed and
1114 notarizied before distribution. See Apple&#39;s documentation for more
1115 background on what this means and how it works. To help support this,
1116 the JDK build can be configured to automatically sign all native
1117 binaries, and the JDK bundle, with all the options needed for successful
1118 notarization, as well as all the entitlements required by the JDK. To
1119 enable &lt;code&gt;hardened&lt;/code&gt; signing, use configure parameter
1120 &lt;code&gt;--with-macosx-codesign=hardened&lt;/code&gt; and configure the signing
1121 identity you wish to use with
1122 &lt;code&gt;--with-macosx-codesign-identity=&amp;lt;identity&amp;gt;&lt;/code&gt;. The
1123 identity refers to a signing identity from Apple that needs to be
1124 preinstalled on the build host.&lt;/p&gt;
1125 &lt;p&gt;When not signing for distribution with the hardened option, the JDK
1126 build will still attempt to perform &lt;code&gt;adhoc&lt;/code&gt; signing to add
1127 the special entitlement &lt;code&gt;com.apple.security.get-task-allow&lt;/code&gt;
1128 to each binary. This entitlement is required to be able to dump core
1129 files from a process. Note that adding this entitlement makes the build
1130 invalid for notarization, so it is only added when signing in
1131 &lt;code&gt;debug&lt;/code&gt; mode. To explicitly enable this kind of adhoc
1132 signing, use configure parameter
1133 &lt;code&gt;--with-macosx-codesign=debug&lt;/code&gt;. It will be enabled by default
1134 in most cases.&lt;/p&gt;
1135 &lt;p&gt;It&#39;s also possible to completely disable any explicit codesign
1136 operations done by the JDK build using the configure parameter
1137 &lt;code&gt;--without-macosx-codesign&lt;/code&gt;. The exact behavior then depends
1138 on the architecture. For macOS on x64, it (at least at the time of this
1139 writing) results in completely unsigned binaries that should still work
1140 fine for development and debugging purposes. On aarch64, the Xcode
1141 linker will apply a default &quot;adhoc&quot; signing, without any entitlements.
1142 Such a build does not allow dumping core files.&lt;/p&gt;
1143 &lt;p&gt;The default mode &quot;auto&quot; will try for &lt;code&gt;hardened&lt;/code&gt; signing if
1144 the debug level is &lt;code&gt;release&lt;/code&gt; and either the default identity
1145 or the specified identity is valid. If hardened isn&#39;t possible, then
1146 &lt;code&gt;debug&lt;/code&gt; signing is chosen if it works. If nothing works, the
1147 codesign build step is disabled.&lt;/p&gt;
1148 &lt;h2 id=&quot;cross-compiling&quot;&gt;Cross-compiling&lt;/h2&gt;
1149 &lt;p&gt;Cross-compiling means using one platform (the &lt;em&gt;build&lt;/em&gt;
1150 platform) to generate output that can ran on another platform (the
1151 &lt;em&gt;target&lt;/em&gt; platform).&lt;/p&gt;
1152 &lt;p&gt;The typical reason for cross-compiling is that the build is performed
1153 on a more powerful desktop computer, but the resulting binaries will be
1154 able to run on a different, typically low-performing system. Most of the
1155 complications that arise when building for embedded is due to this
1156 separation of &lt;em&gt;build&lt;/em&gt; and &lt;em&gt;target&lt;/em&gt; systems.&lt;/p&gt;
1157 &lt;p&gt;This requires a more complex setup and build procedure. This section
1158 assumes you are familiar with cross-compiling in general, and will only
1159 deal with the particularities of cross-compiling the JDK. If you are new
1160 to cross-compiling, please see the &lt;a
1161 href=&quot;https://en.wikipedia.org/wiki/Cross_compiler#External_links&quot;&gt;external
1162 links at Wikipedia&lt;/a&gt; for a good start on reading materials.&lt;/p&gt;
1163 &lt;p&gt;Cross-compiling the JDK requires you to be able to build both for the
1164 build platform and for the target platform. The reason for the former is
1165 that we need to build and execute tools during the build process, both
1166 native tools and Java tools.&lt;/p&gt;
1167 &lt;p&gt;If all you want to do is to compile a 32-bit version, for the same
1168 OS, on a 64-bit machine, consider using
1169 &lt;code&gt;--with-target-bits=32&lt;/code&gt; instead of doing a full-blown
1170 cross-compilation. (While this surely is possible, it&#39;s a lot more work
1171 and will take much longer to build.)&lt;/p&gt;
1172 &lt;h3 id=&quot;cross-compiling-the-easy-way-with-openjdk-devkits&quot;&gt;Cross
1173 compiling the easy way with OpenJDK devkits&lt;/h3&gt;
1174 &lt;p&gt;The OpenJDK build system provides out-of-the box support for creating
1175 and using so called devkits. A &lt;code&gt;devkit&lt;/code&gt; is basically a
1176 collection of a cross-compiling toolchain and a sysroot environment
1177 which can easily be used together with the &lt;code&gt;--with-devkit&lt;/code&gt;
1178 configure option to cross compile the OpenJDK. On Linux/x86_64, the
1179 following command:&lt;/p&gt;
1180 &lt;pre&gt;&lt;code&gt;bash configure --with-devkit=&amp;lt;devkit-path&amp;gt; --openjdk-target=ppc64-linux-gnu &amp;amp;&amp;amp; make&lt;/code&gt;&lt;/pre&gt;
1181 &lt;p&gt;will configure and build OpenJDK for Linux/ppc64 assuming that
1182 &lt;code&gt;&amp;lt;devkit-path&amp;gt;&lt;/code&gt; points to a Linux/x86_64 to Linux/ppc64
1183 devkit.&lt;/p&gt;
1184 &lt;p&gt;Devkits can be created from the &lt;code&gt;make/devkit&lt;/code&gt; directory by
1185 executing:&lt;/p&gt;
1186 &lt;pre&gt;&lt;code&gt;make [ TARGETS=&amp;quot;&amp;lt;TARGET_TRIPLET&amp;gt;+&amp;quot; ] [ BASE_OS=&amp;lt;OS&amp;gt; ] [ BASE_OS_VERSION=&amp;lt;VER&amp;gt; ]&lt;/code&gt;&lt;/pre&gt;
1187 &lt;p&gt;where &lt;code&gt;TARGETS&lt;/code&gt; contains one or more
1188 &lt;code&gt;TARGET_TRIPLET&lt;/code&gt;s of the form described in &lt;a
1189 href=&quot;https://sourceware.org/autobook/autobook/autobook_17.html&quot;&gt;section
1190 3.4 of the GNU Autobook&lt;/a&gt;. If no targets are given, a native toolchain
1191 for the current platform will be created. Currently, at least the
1192 following targets are known to work:&lt;/p&gt;
1193 &lt;table&gt;
1194 &lt;thead&gt;
1195 &lt;tr class=&quot;header&quot;&gt;
1196 &lt;th style=&quot;text-align: left;&quot;&gt;Supported devkit targets&lt;/th&gt;
1197 &lt;/tr&gt;
1198 &lt;/thead&gt;
1199 &lt;tbody&gt;
1200 &lt;tr class=&quot;odd&quot;&gt;
1201 &lt;td style=&quot;text-align: left;&quot;&gt;x86_64-linux-gnu&lt;/td&gt;
1202 &lt;/tr&gt;
1203 &lt;tr class=&quot;even&quot;&gt;
1204 &lt;td style=&quot;text-align: left;&quot;&gt;aarch64-linux-gnu&lt;/td&gt;
1205 &lt;/tr&gt;
1206 &lt;tr class=&quot;odd&quot;&gt;
1207 &lt;td style=&quot;text-align: left;&quot;&gt;arm-linux-gnueabihf&lt;/td&gt;
1208 &lt;/tr&gt;
1209 &lt;tr class=&quot;even&quot;&gt;
1210 &lt;td style=&quot;text-align: left;&quot;&gt;ppc64-linux-gnu&lt;/td&gt;
1211 &lt;/tr&gt;
1212 &lt;tr class=&quot;odd&quot;&gt;
1213 &lt;td style=&quot;text-align: left;&quot;&gt;ppc64le-linux-gnu&lt;/td&gt;
1214 &lt;/tr&gt;
1215 &lt;tr class=&quot;even&quot;&gt;
1216 &lt;td style=&quot;text-align: left;&quot;&gt;s390x-linux-gnu&lt;/td&gt;
1217 &lt;/tr&gt;
1218 &lt;/tbody&gt;
1219 &lt;/table&gt;
1220 &lt;p&gt;&lt;code&gt;BASE_OS&lt;/code&gt; must be one of &quot;OEL6&quot; for Oracle Enterprise
1221 Linux 6 or &quot;Fedora&quot; (if not specified &quot;OEL6&quot; will be the default). If
1222 the base OS is &quot;Fedora&quot; the corresponding Fedora release can be
1223 specified with the help of the &lt;code&gt;BASE_OS_VERSION&lt;/code&gt; option (with
1224 &quot;27&quot; as default version). If the build is successful, the new devkits
1225 can be found in the &lt;code&gt;build/devkit/result&lt;/code&gt; subdirectory:&lt;/p&gt;
1226 &lt;pre&gt;&lt;code&gt;cd make/devkit
1227 make TARGETS=&amp;quot;ppc64le-linux-gnu aarch64-linux-gnu&amp;quot; BASE_OS=Fedora BASE_OS_VERSION=21
1228 ls -1 ../../build/devkit/result/
1229 x86_64-linux-gnu-to-aarch64-linux-gnu
1230 x86_64-linux-gnu-to-ppc64le-linux-gnu&lt;/code&gt;&lt;/pre&gt;
1231 &lt;p&gt;Notice that devkits are not only useful for targeting different build
1232 platforms. Because they contain the full build dependencies for a system
1233 (i.e. compiler and root file system), they can easily be used to build
1234 well-known, reliable and reproducible build environments. You can for
1235 example create and use a devkit with GCC 7.3 and a Fedora 12 sysroot
1236 environment (with glibc 2.11) on Ubuntu 14.04 (which doesn&#39;t have GCC
1237 7.3 by default) to produce OpenJDK binaries which will run on all Linux
1238 systems with runtime libraries newer than the ones from Fedora 12 (e.g.
1239 Ubuntu 16.04, SLES 11 or RHEL 6).&lt;/p&gt;
1240 &lt;h3 id=&quot;boot-jdk-and-build-jdk&quot;&gt;Boot JDK and Build JDK&lt;/h3&gt;
1241 &lt;p&gt;When cross-compiling, make sure you use a boot JDK that runs on the
1242 &lt;em&gt;build&lt;/em&gt; system, and not on the &lt;em&gt;target&lt;/em&gt; system.&lt;/p&gt;
1243 &lt;p&gt;To be able to build, we need a &quot;Build JDK&quot;, which is a JDK built from
1244 the current sources (that is, the same as the end result of the entire
1245 build process), but able to run on the &lt;em&gt;build&lt;/em&gt; system, and not
1246 the &lt;em&gt;target&lt;/em&gt; system. (In contrast, the Boot JDK should be from an
1247 older release, e.g. JDK 8 when building JDK 9.)&lt;/p&gt;
1248 &lt;p&gt;The build process will create a minimal Build JDK for you, as part of
1249 building. To speed up the build, you can use
1250 &lt;code&gt;--with-build-jdk&lt;/code&gt; to &lt;code&gt;configure&lt;/code&gt; to point to a
1251 pre-built Build JDK. Please note that the build result is unpredictable,
1252 and can possibly break in subtle ways, if the Build JDK does not
1253 &lt;strong&gt;exactly&lt;/strong&gt; match the current sources.&lt;/p&gt;
1254 &lt;h3 id=&quot;specifying-the-target-platform&quot;&gt;Specifying the Target
1255 Platform&lt;/h3&gt;
1256 &lt;p&gt;You &lt;em&gt;must&lt;/em&gt; specify the target platform when cross-compiling.
1257 Doing so will also automatically turn the build into a cross-compiling
1258 mode. The simplest way to do this is to use the
1259 &lt;code&gt;--openjdk-target&lt;/code&gt; argument, e.g.
1260 &lt;code&gt;--openjdk-target=arm-linux-gnueabihf&lt;/code&gt;. or
1261 &lt;code&gt;--openjdk-target=aarch64-oe-linux&lt;/code&gt;. This will automatically
1262 set the &lt;code&gt;--host&lt;/code&gt; and &lt;code&gt;--target&lt;/code&gt; options for
1263 autoconf, which can otherwise be confusing. (In autoconf terminology,
1264 the &quot;target&quot; is known as &quot;host&quot;, and &quot;target&quot; is used for building a
1265 Canadian cross-compiler.)&lt;/p&gt;
1266 &lt;p&gt;If &lt;code&gt;--build&lt;/code&gt; has not been explicitly passed to configure,
1267 &lt;code&gt;--openjdk-target&lt;/code&gt; will autodetect the build platform and
1268 internally set the flag automatically, otherwise the platform that was
1269 explicitly passed to &lt;code&gt;--build&lt;/code&gt; will be used instead.&lt;/p&gt;
1270 &lt;h3 id=&quot;toolchain-considerations&quot;&gt;Toolchain Considerations&lt;/h3&gt;
1271 &lt;p&gt;You will need two copies of your toolchain, one which generates
1272 output that can run on the target system (the normal, or
1273 &lt;em&gt;target&lt;/em&gt;, toolchain), and one that generates output that can run
1274 on the build system (the &lt;em&gt;build&lt;/em&gt; toolchain). Note that
1275 cross-compiling is only supported for gcc at the time being. The gcc
1276 standard is to prefix cross-compiling toolchains with the target
1277 denominator. If you follow this standard, &lt;code&gt;configure&lt;/code&gt; is
1278 likely to pick up the toolchain correctly.&lt;/p&gt;
1279 &lt;p&gt;The &lt;em&gt;build&lt;/em&gt; toolchain will be autodetected just the same way
1280 the normal &lt;em&gt;build&lt;/em&gt;/&lt;em&gt;target&lt;/em&gt; toolchain will be autodetected
1281 when not cross-compiling. If this is not what you want, or if the
1282 autodetection fails, you can specify a devkit containing the
1283 &lt;em&gt;build&lt;/em&gt; toolchain using &lt;code&gt;--with-build-devkit&lt;/code&gt; to
1284 &lt;code&gt;configure&lt;/code&gt;, or by giving &lt;code&gt;BUILD_CC&lt;/code&gt; and
1285 &lt;code&gt;BUILD_CXX&lt;/code&gt; arguments.&lt;/p&gt;
1286 &lt;p&gt;It is often helpful to locate the cross-compilation tools, headers
1287 and libraries in a separate directory, outside the normal path, and
1288 point out that directory to &lt;code&gt;configure&lt;/code&gt;. Do this by setting
1289 the sysroot (&lt;code&gt;--with-sysroot&lt;/code&gt;) and appending the directory
1290 when searching for cross-compilations tools
1291 (&lt;code&gt;--with-toolchain-path&lt;/code&gt;). As a compact form, you can also
1292 use &lt;code&gt;--with-devkit&lt;/code&gt; to point to a single directory, if it is
1293 correctly setup. (See &lt;code&gt;basics.m4&lt;/code&gt; for details.)&lt;/p&gt;
1294 &lt;h3 id=&quot;native-libraries&quot;&gt;Native Libraries&lt;/h3&gt;
1295 &lt;p&gt;You will need copies of external native libraries for the
1296 &lt;em&gt;target&lt;/em&gt; system, present on the &lt;em&gt;build&lt;/em&gt; machine while
1297 building.&lt;/p&gt;
1298 &lt;p&gt;Take care not to replace the &lt;em&gt;build&lt;/em&gt; system&#39;s version of these
1299 libraries by mistake, since that can render the &lt;em&gt;build&lt;/em&gt; machine
1300 unusable.&lt;/p&gt;
1301 &lt;p&gt;Make sure that the libraries you point to (ALSA, X11, etc) are for
1302 the &lt;em&gt;target&lt;/em&gt;, not the &lt;em&gt;build&lt;/em&gt;, platform.&lt;/p&gt;
1303 &lt;h4 id=&quot;alsa-1&quot;&gt;ALSA&lt;/h4&gt;
1304 &lt;p&gt;You will need alsa libraries suitable for your &lt;em&gt;target&lt;/em&gt;
1305 system. For most cases, using Debian&#39;s pre-built libraries work
1306 fine.&lt;/p&gt;
1307 &lt;p&gt;Note that alsa is needed even if you only want to build a headless
1308 JDK.&lt;/p&gt;
1309 &lt;ul&gt;
1310 &lt;li&gt;&lt;p&gt;Go to &lt;a href=&quot;https://www.debian.org/distrib/packages&quot;&gt;Debian
1311 Package Search&lt;/a&gt; and search for the &lt;code&gt;libasound2&lt;/code&gt; and
1312 &lt;code&gt;libasound2-dev&lt;/code&gt; packages for your &lt;em&gt;target&lt;/em&gt; system.
1313 Download them to /tmp.&lt;/p&gt;&lt;/li&gt;
1314 &lt;li&gt;&lt;p&gt;Install the libraries into the cross-compilation toolchain. For
1315 instance:&lt;/p&gt;&lt;/li&gt;
1316 &lt;/ul&gt;
1317 &lt;pre&gt;&lt;code&gt;cd /tools/gcc-linaro-arm-linux-gnueabihf-raspbian-2012.09-20120921_linux/arm-linux-gnueabihf/libc
1318 dpkg-deb -x /tmp/libasound2_1.0.25-4_armhf.deb .
1319 dpkg-deb -x /tmp/libasound2-dev_1.0.25-4_armhf.deb .&lt;/code&gt;&lt;/pre&gt;
1320 &lt;ul&gt;
1321 &lt;li&gt;If alsa is not properly detected by &lt;code&gt;configure&lt;/code&gt;, you can
1322 point it out by &lt;code&gt;--with-alsa&lt;/code&gt;.&lt;/li&gt;
1323 &lt;/ul&gt;
1324 &lt;h4 id=&quot;x11-1&quot;&gt;X11&lt;/h4&gt;
1325 &lt;p&gt;You will need X11 libraries suitable for your &lt;em&gt;target&lt;/em&gt; system.
1326 For most cases, using Debian&#39;s pre-built libraries work fine.&lt;/p&gt;
1327 &lt;p&gt;Note that X11 is needed even if you only want to build a headless
1328 JDK.&lt;/p&gt;
1329 &lt;ul&gt;
1330 &lt;li&gt;&lt;p&gt;Go to &lt;a href=&quot;https://www.debian.org/distrib/packages&quot;&gt;Debian
1331 Package Search&lt;/a&gt;, search for the following packages for your
1332 &lt;em&gt;target&lt;/em&gt; system, and download them to /tmp/target-x11:&lt;/p&gt;
1333 &lt;ul&gt;
1334 &lt;li&gt;libxi&lt;/li&gt;
1335 &lt;li&gt;libxi-dev&lt;/li&gt;
1336 &lt;li&gt;x11proto-core-dev&lt;/li&gt;
1337 &lt;li&gt;x11proto-input-dev&lt;/li&gt;
1338 &lt;li&gt;x11proto-kb-dev&lt;/li&gt;
1339 &lt;li&gt;x11proto-render-dev&lt;/li&gt;
1340 &lt;li&gt;x11proto-xext-dev&lt;/li&gt;
1341 &lt;li&gt;libice-dev&lt;/li&gt;
1342 &lt;li&gt;libxrender&lt;/li&gt;
1343 &lt;li&gt;libxrender-dev&lt;/li&gt;
1344 &lt;li&gt;libxrandr-dev&lt;/li&gt;
1345 &lt;li&gt;libsm-dev&lt;/li&gt;
1346 &lt;li&gt;libxt-dev&lt;/li&gt;
1347 &lt;li&gt;libx11&lt;/li&gt;
1348 &lt;li&gt;libx11-dev&lt;/li&gt;
1349 &lt;li&gt;libxtst&lt;/li&gt;
1350 &lt;li&gt;libxtst-dev&lt;/li&gt;
1351 &lt;li&gt;libxext&lt;/li&gt;
1352 &lt;li&gt;libxext-dev&lt;/li&gt;
1353 &lt;/ul&gt;&lt;/li&gt;
1354 &lt;li&gt;&lt;p&gt;Install the libraries into the cross-compilation toolchain. For
1355 instance:&lt;/p&gt;
1356 &lt;pre&gt;&lt;code&gt;    cd /tools/gcc-linaro-arm-linux-gnueabihf-raspbian-2012.09-20120921_linux/arm-linux-gnueabihf/libc/usr
1357     mkdir X11R6
1358     cd X11R6
1359     for deb in /tmp/target-x11/*.deb ; do dpkg-deb -x $deb . ; done
1360     mv usr/* .
1361     cd lib
1362     cp arm-linux-gnueabihf/* .
1363     ```
1364 
1365 You can ignore the following messages. These libraries are not needed to
1366 successfully complete a full JDK build.&lt;/code&gt;&lt;/pre&gt;
1367 &lt;p&gt;cp: cannot stat
1368 &lt;code&gt;arm-linux-gnueabihf/libICE.so&#39;: No such file or directory cp: cannot stat&lt;/code&gt;arm-linux-gnueabihf/libSM.so&#39;:
1369 No such file or directory cp: cannot stat
1370 `arm-linux-gnueabihf/libXt.so&#39;: No such file or directory ```&lt;/p&gt;&lt;/li&gt;
1371 &lt;li&gt;&lt;p&gt;If the X11 libraries are not properly detected by
1372 &lt;code&gt;configure&lt;/code&gt;, you can point them out by
1373 &lt;code&gt;--with-x&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
1374 &lt;/ul&gt;
1375 &lt;h3 id=&quot;cross-compiling-with-debian-sysroots&quot;&gt;Cross compiling with
1376 Debian sysroots&lt;/h3&gt;
1377 &lt;p&gt;Fortunately, you can create sysroots for foreign architectures with
1378 tools provided by your OS. On Debian/Ubuntu systems, one could use
1379 &lt;code&gt;qemu-deboostrap&lt;/code&gt; to create the &lt;em&gt;target&lt;/em&gt; system
1380 chroot, which would have the native libraries and headers specific to
1381 that &lt;em&gt;target&lt;/em&gt; system. After that, we can use the cross-compiler
1382 on the &lt;em&gt;build&lt;/em&gt; system, pointing into chroot to get the build
1383 dependencies right. This allows building for foreign architectures with
1384 native compilation speed.&lt;/p&gt;
1385 &lt;p&gt;For example, cross-compiling to AArch64 from x86_64 could be done
1386 like this:&lt;/p&gt;
1387 &lt;ul&gt;
1388 &lt;li&gt;&lt;p&gt;Install cross-compiler on the &lt;em&gt;build&lt;/em&gt; system:
1389 &lt;code&gt;apt install g++-aarch64-linux-gnu gcc-aarch64-linux-gnu&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
1390 &lt;li&gt;&lt;p&gt;Create chroot on the &lt;em&gt;build&lt;/em&gt; system, configuring it for
1391 &lt;em&gt;target&lt;/em&gt; system:
1392 &lt;code&gt;sudo qemu-debootstrap \       --arch=arm64 \       --verbose \       --include=fakeroot,symlinks,build-essential,libx11-dev,libxext-dev,libxrender-dev,libxrandr-dev,libxtst-dev,libxt-dev,libcups2-dev,libfontconfig1-dev,libasound2-dev,libfreetype6-dev,libpng-dev,libffi-dev \       --resolve-deps \       buster \       ~/sysroot-arm64 \       http://httpredir.debian.org/debian/&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
1393 &lt;li&gt;&lt;p&gt;Make sure the symlinks inside the newly created chroot point to
1394 proper locations:
1395 &lt;code&gt;sudo chroot ~/sysroot-arm64 symlinks -cr .&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
1396 &lt;li&gt;&lt;p&gt;Configure and build with newly created chroot as
1397 sysroot/toolchain-path:
1398 &lt;code&gt;sh ./configure \       --openjdk-target=aarch64-linux-gnu \       --with-sysroot=~/sysroot-arm64     make images     ls build/linux-aarch64-server-release/&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
1399 &lt;/ul&gt;
1400 &lt;p&gt;The build does not create new files in that chroot, so it can be
1401 reused for multiple builds without additional cleanup.&lt;/p&gt;
1402 &lt;p&gt;The build system should automatically detect the toolchain paths and
1403 dependencies, but sometimes it might require a little nudge with:&lt;/p&gt;
1404 &lt;ul&gt;
1405 &lt;li&gt;&lt;p&gt;Native compilers: override &lt;code&gt;CC&lt;/code&gt; or &lt;code&gt;CXX&lt;/code&gt;
1406 for &lt;code&gt;./configure&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
1407 &lt;li&gt;&lt;p&gt;Freetype lib location: override &lt;code&gt;--with-freetype-lib&lt;/code&gt;,
1408 for example &lt;code&gt;${sysroot}/usr/lib/${target}/&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
1409 &lt;li&gt;&lt;p&gt;Freetype includes location: override
1410 &lt;code&gt;--with-freetype-include&lt;/code&gt; for example
1411 &lt;code&gt;${sysroot}/usr/include/freetype2/&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
1412 &lt;li&gt;&lt;p&gt;X11 libraries location: override &lt;code&gt;--x-libraries&lt;/code&gt;, for
1413 example &lt;code&gt;${sysroot}/usr/lib/${target}/&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
1414 &lt;/ul&gt;
1415 &lt;p&gt;Architectures that are known to successfully cross-compile like this
1416 are:&lt;/p&gt;
1417 &lt;table&gt;
1418 &lt;thead&gt;
1419 &lt;tr class=&quot;header&quot;&gt;
1420 &lt;th style=&quot;text-align: left;&quot;&gt;Target&lt;/th&gt;
1421 &lt;th style=&quot;text-align: left;&quot;&gt;Debian tree&lt;/th&gt;
1422 &lt;th style=&quot;text-align: left;&quot;&gt;Debian arch&lt;/th&gt;
1423 &lt;th style=&quot;text-align: left;&quot;&gt;&lt;code&gt;--openjdk-target=...&lt;/code&gt;&lt;/th&gt;
1424 &lt;th&gt;&lt;code&gt;--with-jvm-variants=...&lt;/code&gt;&lt;/th&gt;
1425 &lt;/tr&gt;
1426 &lt;/thead&gt;
1427 &lt;tbody&gt;
1428 &lt;tr class=&quot;odd&quot;&gt;
1429 &lt;td style=&quot;text-align: left;&quot;&gt;x86&lt;/td&gt;
1430 &lt;td style=&quot;text-align: left;&quot;&gt;buster&lt;/td&gt;
1431 &lt;td style=&quot;text-align: left;&quot;&gt;i386&lt;/td&gt;
1432 &lt;td style=&quot;text-align: left;&quot;&gt;i386-linux-gnu&lt;/td&gt;
1433 &lt;td&gt;(all)&lt;/td&gt;
1434 &lt;/tr&gt;
1435 &lt;tr class=&quot;even&quot;&gt;
1436 &lt;td style=&quot;text-align: left;&quot;&gt;arm&lt;/td&gt;
1437 &lt;td style=&quot;text-align: left;&quot;&gt;buster&lt;/td&gt;
1438 &lt;td style=&quot;text-align: left;&quot;&gt;armhf&lt;/td&gt;
1439 &lt;td style=&quot;text-align: left;&quot;&gt;arm-linux-gnueabihf&lt;/td&gt;
1440 &lt;td&gt;(all)&lt;/td&gt;
1441 &lt;/tr&gt;
1442 &lt;tr class=&quot;odd&quot;&gt;
1443 &lt;td style=&quot;text-align: left;&quot;&gt;aarch64&lt;/td&gt;
1444 &lt;td style=&quot;text-align: left;&quot;&gt;buster&lt;/td&gt;
1445 &lt;td style=&quot;text-align: left;&quot;&gt;arm64&lt;/td&gt;
1446 &lt;td style=&quot;text-align: left;&quot;&gt;aarch64-linux-gnu&lt;/td&gt;
1447 &lt;td&gt;(all)&lt;/td&gt;
1448 &lt;/tr&gt;
1449 &lt;tr class=&quot;even&quot;&gt;
1450 &lt;td style=&quot;text-align: left;&quot;&gt;ppc64le&lt;/td&gt;
1451 &lt;td style=&quot;text-align: left;&quot;&gt;buster&lt;/td&gt;
1452 &lt;td style=&quot;text-align: left;&quot;&gt;ppc64el&lt;/td&gt;
1453 &lt;td style=&quot;text-align: left;&quot;&gt;powerpc64le-linux-gnu&lt;/td&gt;
1454 &lt;td&gt;(all)&lt;/td&gt;
1455 &lt;/tr&gt;
1456 &lt;tr class=&quot;odd&quot;&gt;
1457 &lt;td style=&quot;text-align: left;&quot;&gt;s390x&lt;/td&gt;
1458 &lt;td style=&quot;text-align: left;&quot;&gt;buster&lt;/td&gt;
1459 &lt;td style=&quot;text-align: left;&quot;&gt;s390x&lt;/td&gt;
1460 &lt;td style=&quot;text-align: left;&quot;&gt;s390x-linux-gnu&lt;/td&gt;
1461 &lt;td&gt;(all)&lt;/td&gt;
1462 &lt;/tr&gt;
1463 &lt;tr class=&quot;even&quot;&gt;
1464 &lt;td style=&quot;text-align: left;&quot;&gt;mipsle&lt;/td&gt;
1465 &lt;td style=&quot;text-align: left;&quot;&gt;buster&lt;/td&gt;
1466 &lt;td style=&quot;text-align: left;&quot;&gt;mipsel&lt;/td&gt;
1467 &lt;td style=&quot;text-align: left;&quot;&gt;mipsel-linux-gnu&lt;/td&gt;
1468 &lt;td&gt;zero&lt;/td&gt;
1469 &lt;/tr&gt;
1470 &lt;tr class=&quot;odd&quot;&gt;
1471 &lt;td style=&quot;text-align: left;&quot;&gt;mips64le&lt;/td&gt;
1472 &lt;td style=&quot;text-align: left;&quot;&gt;buster&lt;/td&gt;
1473 &lt;td style=&quot;text-align: left;&quot;&gt;mips64el&lt;/td&gt;
1474 &lt;td style=&quot;text-align: left;&quot;&gt;mips64el-linux-gnueabi64&lt;/td&gt;
1475 &lt;td&gt;zero&lt;/td&gt;
1476 &lt;/tr&gt;
1477 &lt;tr class=&quot;even&quot;&gt;
1478 &lt;td style=&quot;text-align: left;&quot;&gt;armel&lt;/td&gt;
1479 &lt;td style=&quot;text-align: left;&quot;&gt;buster&lt;/td&gt;
1480 &lt;td style=&quot;text-align: left;&quot;&gt;arm&lt;/td&gt;
1481 &lt;td style=&quot;text-align: left;&quot;&gt;arm-linux-gnueabi&lt;/td&gt;
1482 &lt;td&gt;zero&lt;/td&gt;
1483 &lt;/tr&gt;
1484 &lt;tr class=&quot;odd&quot;&gt;
1485 &lt;td style=&quot;text-align: left;&quot;&gt;ppc&lt;/td&gt;
1486 &lt;td style=&quot;text-align: left;&quot;&gt;sid&lt;/td&gt;
1487 &lt;td style=&quot;text-align: left;&quot;&gt;powerpc&lt;/td&gt;
1488 &lt;td style=&quot;text-align: left;&quot;&gt;powerpc-linux-gnu&lt;/td&gt;
1489 &lt;td&gt;zero&lt;/td&gt;
1490 &lt;/tr&gt;
1491 &lt;tr class=&quot;even&quot;&gt;
1492 &lt;td style=&quot;text-align: left;&quot;&gt;ppc64be&lt;/td&gt;
1493 &lt;td style=&quot;text-align: left;&quot;&gt;sid&lt;/td&gt;
1494 &lt;td style=&quot;text-align: left;&quot;&gt;ppc64&lt;/td&gt;
1495 &lt;td style=&quot;text-align: left;&quot;&gt;powerpc64-linux-gnu&lt;/td&gt;
1496 &lt;td&gt;(all)&lt;/td&gt;
1497 &lt;/tr&gt;
1498 &lt;tr class=&quot;odd&quot;&gt;
1499 &lt;td style=&quot;text-align: left;&quot;&gt;m68k&lt;/td&gt;
1500 &lt;td style=&quot;text-align: left;&quot;&gt;sid&lt;/td&gt;
1501 &lt;td style=&quot;text-align: left;&quot;&gt;m68k&lt;/td&gt;
1502 &lt;td style=&quot;text-align: left;&quot;&gt;m68k-linux-gnu&lt;/td&gt;
1503 &lt;td&gt;zero&lt;/td&gt;
1504 &lt;/tr&gt;
1505 &lt;tr class=&quot;even&quot;&gt;
1506 &lt;td style=&quot;text-align: left;&quot;&gt;alpha&lt;/td&gt;
1507 &lt;td style=&quot;text-align: left;&quot;&gt;sid&lt;/td&gt;
1508 &lt;td style=&quot;text-align: left;&quot;&gt;alpha&lt;/td&gt;
1509 &lt;td style=&quot;text-align: left;&quot;&gt;alpha-linux-gnu&lt;/td&gt;
1510 &lt;td&gt;zero&lt;/td&gt;
1511 &lt;/tr&gt;
1512 &lt;tr class=&quot;odd&quot;&gt;
1513 &lt;td style=&quot;text-align: left;&quot;&gt;sh4&lt;/td&gt;
1514 &lt;td style=&quot;text-align: left;&quot;&gt;sid&lt;/td&gt;
1515 &lt;td style=&quot;text-align: left;&quot;&gt;sh4&lt;/td&gt;
1516 &lt;td style=&quot;text-align: left;&quot;&gt;sh4-linux-gnu&lt;/td&gt;
1517 &lt;td&gt;zero&lt;/td&gt;
1518 &lt;/tr&gt;
1519 &lt;/tbody&gt;
1520 &lt;/table&gt;
1521 &lt;h3 id=&quot;building-for-armaarch64&quot;&gt;Building for ARM/aarch64&lt;/h3&gt;
1522 &lt;p&gt;A common cross-compilation target is the ARM CPU. When building for
1523 ARM, it is useful to set the ABI profile. A number of pre-defined ABI
1524 profiles are available using &lt;code&gt;--with-abi-profile&lt;/code&gt;:
1525 arm-vfp-sflt, arm-vfp-hflt, arm-sflt, armv5-vfp-sflt, armv6-vfp-hflt.
1526 Note that soft-float ABIs are no longer properly supported by the
1527 JDK.&lt;/p&gt;
1528 &lt;h3 id=&quot;building-for-musl&quot;&gt;Building for musl&lt;/h3&gt;
1529 &lt;p&gt;Just like it&#39;s possible to cross-compile for a different CPU, it&#39;s
1530 possible to cross-compile for musl libc on a glibc-based &lt;em&gt;build&lt;/em&gt;
1531 system. A devkit suitable for most target CPU architectures can be
1532 obtained from &lt;a href=&quot;https://musl.cc&quot;&gt;musl.cc&lt;/a&gt;. After installing
1533 the required packages in the sysroot, configure the build with
1534 &lt;code&gt;--openjdk-target&lt;/code&gt;:&lt;/p&gt;
1535 &lt;pre&gt;&lt;code&gt;sh ./configure --with-jvm-variants=server \
1536 --with-boot-jdk=$BOOT_JDK \
1537 --with-build-jdk=$BUILD_JDK \
1538 --openjdk-target=x86_64-unknown-linux-musl \
1539 --with-devkit=$DEVKIT \
1540 --with-sysroot=$SYSROOT&lt;/code&gt;&lt;/pre&gt;
1541 &lt;p&gt;and run &lt;code&gt;make&lt;/code&gt; normally.&lt;/p&gt;
1542 &lt;h3 id=&quot;verifying-the-build&quot;&gt;Verifying the Build&lt;/h3&gt;
1543 &lt;p&gt;The build will end up in a directory named like
1544 &lt;code&gt;build/linux-arm-normal-server-release&lt;/code&gt;.&lt;/p&gt;
1545 &lt;p&gt;Inside this build output directory, the &lt;code&gt;images/jdk&lt;/code&gt; will
1546 contain the newly built JDK, for your &lt;em&gt;target&lt;/em&gt; system.&lt;/p&gt;
1547 &lt;p&gt;Copy these folders to your &lt;em&gt;target&lt;/em&gt; system. Then you can run
1548 e.g. &lt;code&gt;images/jdk/bin/java -version&lt;/code&gt;.&lt;/p&gt;
1549 &lt;h2 id=&quot;build-performance&quot;&gt;Build Performance&lt;/h2&gt;
1550 &lt;p&gt;Building the JDK requires a lot of horsepower. Some of the build
1551 tools can be adjusted to utilize more or less of resources such as
1552 parallel threads and memory. The &lt;code&gt;configure&lt;/code&gt; script analyzes
1553 your system and selects reasonable values for such options based on your
1554 hardware. If you encounter resource problems, such as out of memory
1555 conditions, you can modify the detected values with:&lt;/p&gt;
1556 &lt;ul&gt;
1557 &lt;li&gt;&lt;p&gt;&lt;code&gt;--with-num-cores&lt;/code&gt; -- number of cores in the build
1558 system, e.g. &lt;code&gt;--with-num-cores=8&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
1559 &lt;li&gt;&lt;p&gt;&lt;code&gt;--with-memory-size&lt;/code&gt; -- memory (in MB) available in
1560 the build system, e.g. &lt;code&gt;--with-memory-size=1024&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
1561 &lt;/ul&gt;
1562 &lt;p&gt;You can also specify directly the number of build jobs to use with
1563 &lt;code&gt;--with-jobs=N&lt;/code&gt; to &lt;code&gt;configure&lt;/code&gt;, or
1564 &lt;code&gt;JOBS=N&lt;/code&gt; to &lt;code&gt;make&lt;/code&gt;. Do not use the &lt;code&gt;-j&lt;/code&gt;
1565 flag to &lt;code&gt;make&lt;/code&gt;. In most cases it will be ignored by the
1566 makefiles, but it can cause problems for some make targets.&lt;/p&gt;
1567 &lt;p&gt;It might also be necessary to specify the JVM arguments passed to the
1568 Boot JDK, using e.g. &lt;code&gt;--with-boot-jdk-jvmargs=&quot;-Xmx8G&quot;&lt;/code&gt;.
1569 Doing so will override the default JVM arguments passed to the Boot
1570 JDK.&lt;/p&gt;
1571 &lt;p&gt;At the end of a successful execution of &lt;code&gt;configure&lt;/code&gt;, you
1572 will get a performance summary, indicating how well the build will
1573 perform. Here you will also get performance hints. If you want to build
1574 fast, pay attention to those!&lt;/p&gt;
1575 &lt;p&gt;If you want to tweak build performance, run with
1576 &lt;code&gt;make LOG=info&lt;/code&gt; to get a build time summary at the end of the
1577 build process.&lt;/p&gt;
1578 &lt;h3 id=&quot;disk-speed&quot;&gt;Disk Speed&lt;/h3&gt;
1579 &lt;p&gt;If you are using network shares, e.g. via NFS, for your source code,
1580 make sure the build directory is situated on local disk (e.g. by
1581 &lt;code&gt;ln -s /localdisk/jdk-build $JDK-SHARE/build&lt;/code&gt;). The
1582 performance penalty is extremely high for building on a network share;
1583 close to unusable.&lt;/p&gt;
1584 &lt;p&gt;Also, make sure that your build tools (including Boot JDK and
1585 toolchain) is located on a local disk and not a network share.&lt;/p&gt;
1586 &lt;p&gt;As has been stressed elsewhere, do use SSD for source code and build
1587 directory, as well as (if possible) the build tools.&lt;/p&gt;
1588 &lt;h3 id=&quot;virus-checking&quot;&gt;Virus Checking&lt;/h3&gt;
1589 &lt;p&gt;The use of virus checking software, especially on Windows, can
1590 &lt;em&gt;significantly&lt;/em&gt; slow down building of the JDK. If possible, turn
1591 off such software, or exclude the directory containing the JDK source
1592 code from on-the-fly checking.&lt;/p&gt;
1593 &lt;h3 id=&quot;ccache&quot;&gt;Ccache&lt;/h3&gt;
1594 &lt;p&gt;The JDK build supports building with ccache when using gcc or clang.
1595 Using ccache can radically speed up compilation of native code if you
1596 often rebuild the same sources. Your milage may vary however, so we
1597 recommend evaluating it for yourself. To enable it, make sure it&#39;s on
1598 the path and configure with &lt;code&gt;--enable-ccache&lt;/code&gt;.&lt;/p&gt;
1599 &lt;h3 id=&quot;precompiled-headers&quot;&gt;Precompiled Headers&lt;/h3&gt;
1600 &lt;p&gt;By default, the Hotspot build uses preccompiled headers (PCH) on the
1601 toolchains were it is properly supported (clang, gcc, and Visual
1602 Studio). Normally, this speeds up the build process, but in some
1603 circumstances, it can actually slow things down.&lt;/p&gt;
1604 &lt;p&gt;You can experiment by disabling precompiled headers using
1605 &lt;code&gt;--disable-precompiled-headers&lt;/code&gt;.&lt;/p&gt;
1606 &lt;h3 id=&quot;icecc-icecream&quot;&gt;Icecc / icecream&lt;/h3&gt;
1607 &lt;p&gt;&lt;a href=&quot;http://github.com/icecc/icecream&quot;&gt;icecc/icecream&lt;/a&gt; is a
1608 simple way to setup a distributed compiler network. If you have multiple
1609 machines available for building the JDK, you can drastically cut
1610 individual build times by utilizing it.&lt;/p&gt;
1611 &lt;p&gt;To use, setup an icecc network, and install icecc on the build
1612 machine. Then run &lt;code&gt;configure&lt;/code&gt; using
1613 &lt;code&gt;--enable-icecc&lt;/code&gt;.&lt;/p&gt;
1614 &lt;h3 id=&quot;using-the-javac-server&quot;&gt;Using the javac server&lt;/h3&gt;
1615 &lt;p&gt;To speed up compilation of Java code, especially during incremental
1616 compilations, the javac server is automatically enabled in the
1617 configuration step by default. To explicitly enable or disable the javac
1618 server, use either &lt;code&gt;--enable-javac-server&lt;/code&gt; or
1619 &lt;code&gt;--disable-javac-server&lt;/code&gt;.&lt;/p&gt;
1620 &lt;h3 id=&quot;building-the-right-target&quot;&gt;Building the Right Target&lt;/h3&gt;
1621 &lt;p&gt;Selecting the proper target to build can have dramatic impact on
1622 build time. For normal usage, &lt;code&gt;jdk&lt;/code&gt; or the default target is
1623 just fine. You only need to build &lt;code&gt;images&lt;/code&gt; for shipping, or
1624 if your tests require it.&lt;/p&gt;
1625 &lt;p&gt;See also &lt;a href=&quot;#using-fine-grained-make-targets&quot;&gt;Using
1626 Fine-Grained Make Targets&lt;/a&gt; on how to build an even smaller subset of
1627 the product.&lt;/p&gt;
1628 &lt;h2 id=&quot;troubleshooting&quot;&gt;Troubleshooting&lt;/h2&gt;
1629 &lt;p&gt;If your build fails, it can sometimes be difficult to pinpoint the
1630 problem or find a proper solution.&lt;/p&gt;
1631 &lt;h3 id=&quot;locating-the-source-of-the-error&quot;&gt;Locating the Source of the
1632 Error&lt;/h3&gt;
1633 &lt;p&gt;When a build fails, it can be hard to pinpoint the actual cause of
1634 the error. In a typical build process, different parts of the product
1635 build in parallel, with the output interlaced.&lt;/p&gt;
1636 &lt;h4 id=&quot;build-failure-summary&quot;&gt;Build Failure Summary&lt;/h4&gt;
1637 &lt;p&gt;To help you, the build system will print a failure summary at the
1638 end. It looks like this:&lt;/p&gt;
1639 &lt;pre&gt;&lt;code&gt;ERROR: Build failed for target &amp;#39;hotspot&amp;#39; in configuration &amp;#39;linux-x64&amp;#39; (exit code 2)
1640 
1641 === Output from failing command(s) repeated here ===
1642 * For target hotspot_variant-server_libjvm_objs_psMemoryPool.o:
1643 /localhome/git/jdk-sandbox/hotspot/src/share/vm/services/psMemoryPool.cpp:1:1: error: &amp;#39;failhere&amp;#39; does not name a type
1644    ... (rest of output omitted)
1645 
1646 * All command lines available in /localhome/git/jdk-sandbox/build/linux-x64/make-support/failure-logs.
1647 === End of repeated output ===
1648 
1649 === Make failed targets repeated here ===
1650 lib/CompileJvm.gmk:207: recipe for target &amp;#39;/localhome/git/jdk-sandbox/build/linux-x64/hotspot/variant-server/libjvm/objs/psMemoryPool.o&amp;#39; failed
1651 make/Main.gmk:263: recipe for target &amp;#39;hotspot-server-libs&amp;#39; failed
1652 === End of repeated output ===
1653 
1654 Hint: Try searching the build log for the name of the first failed target.
1655 Hint: If caused by a warning, try configure --disable-warnings-as-errors.&lt;/code&gt;&lt;/pre&gt;
1656 &lt;p&gt;Let&#39;s break it down! First, the selected configuration, and the
1657 top-level target you entered on the command line that caused the failure
1658 is printed.&lt;/p&gt;
1659 &lt;p&gt;Then, between the
1660 &lt;code&gt;Output from failing command(s) repeated here&lt;/code&gt; and
1661 &lt;code&gt;End of repeated output&lt;/code&gt; the first lines of output (stdout
1662 and stderr) from the actual failing command is repeated. In most cases,
1663 this is the error message that caused the build to fail. If multiple
1664 commands were failing (this can happen in a parallel build), output from
1665 all failed commands will be printed here.&lt;/p&gt;
1666 &lt;p&gt;The path to the &lt;code&gt;failure-logs&lt;/code&gt; directory is printed. In
1667 this file you will find a &lt;code&gt;&amp;lt;target&amp;gt;.log&lt;/code&gt; file that
1668 contains the output from this command in its entirety, and also a
1669 &lt;code&gt;&amp;lt;target&amp;gt;.cmd&lt;/code&gt;, which contain the complete command line
1670 used for running this command. You can re-run the failing command by
1671 executing &lt;code&gt;. &amp;lt;path to failure-logs&amp;gt;/&amp;lt;target&amp;gt;.cmd&lt;/code&gt;
1672 in your shell.&lt;/p&gt;
1673 &lt;p&gt;Another way to trace the failure is to follow the chain of make
1674 targets, from top-level targets to individual file targets. Between
1675 &lt;code&gt;Make failed targets repeated here&lt;/code&gt; and
1676 &lt;code&gt;End of repeated output&lt;/code&gt; the output from make showing this
1677 chain is repeated. The first failed recipe will typically contain the
1678 full path to the file in question that failed to compile. Following
1679 lines will show a trace of make targets why we ended up trying to
1680 compile that file.&lt;/p&gt;
1681 &lt;p&gt;Finally, some hints are given on how to locate the error in the
1682 complete log. In this example, we would try searching the log file for
1683 &quot;&lt;code&gt;psMemoryPool.o&lt;/code&gt;&quot;. Another way to quickly locate make errors
1684 in the log is to search for &quot;&lt;code&gt;] Error&lt;/code&gt;&quot; or
1685 &quot;&lt;code&gt;***&lt;/code&gt;&quot;.&lt;/p&gt;
1686 &lt;p&gt;Note that the build failure summary will only help you if the issue
1687 was a compilation failure or similar. If the problem is more esoteric,
1688 or is due to errors in the build machinery, you will likely get empty
1689 output logs, and &lt;code&gt;No indication of failed target found&lt;/code&gt;
1690 instead of the make target chain.&lt;/p&gt;
1691 &lt;h4 id=&quot;checking-the-build-log-file&quot;&gt;Checking the Build Log File&lt;/h4&gt;
1692 &lt;p&gt;The output (stdout and stderr) from the latest build is always stored
1693 in &lt;code&gt;$BUILD/build.log&lt;/code&gt;. The previous build log is stored as
1694 &lt;code&gt;build.log.old&lt;/code&gt;. This means that it is not necessary to
1695 redirect the build output yourself if you want to process it.&lt;/p&gt;
1696 &lt;p&gt;You can increase the verbosity of the log file, by the
1697 &lt;code&gt;LOG&lt;/code&gt; control variable to &lt;code&gt;make&lt;/code&gt;. If you want to
1698 see the command lines used in compilations, use
1699 &lt;code&gt;LOG=cmdlines&lt;/code&gt;. To increase the general verbosity, use
1700 &lt;code&gt;LOG=info&lt;/code&gt;, &lt;code&gt;LOG=debug&lt;/code&gt; or &lt;code&gt;LOG=trace&lt;/code&gt;.
1701 Both of these can be combined with &lt;code&gt;cmdlines&lt;/code&gt;, e.g.
1702 &lt;code&gt;LOG=info,cmdlines&lt;/code&gt;. The &lt;code&gt;debug&lt;/code&gt; log level will
1703 show most shell commands executed by make, and &lt;code&gt;trace&lt;/code&gt; will
1704 show all. Beware that both these log levels will produce a massive build
1705 log!&lt;/p&gt;
1706 &lt;h3 id=&quot;fixing-unexpected-build-failures&quot;&gt;Fixing Unexpected Build
1707 Failures&lt;/h3&gt;
1708 &lt;p&gt;Most of the time, the build will fail due to incorrect changes in the
1709 source code.&lt;/p&gt;
1710 &lt;p&gt;Sometimes the build can fail with no apparent changes that have
1711 caused the failure. If this is the first time you are building the JDK
1712 on this particular computer, and the build fails, the problem is likely
1713 with your build environment. But even if you have previously built the
1714 JDK with success, and it now fails, your build environment might have
1715 changed (perhaps due to OS upgrades or similar). But most likely, such
1716 failures are due to problems with the incremental rebuild.&lt;/p&gt;
1717 &lt;h4 id=&quot;problems-with-the-build-environment&quot;&gt;Problems with the Build
1718 Environment&lt;/h4&gt;
1719 &lt;p&gt;Make sure your configuration is correct. Re-run
1720 &lt;code&gt;configure&lt;/code&gt;, and look for any warnings. Warnings that appear
1721 in the middle of the &lt;code&gt;configure&lt;/code&gt; output is also repeated at
1722 the end, after the summary. The entire log is stored in
1723 &lt;code&gt;$BUILD/configure.log&lt;/code&gt;.&lt;/p&gt;
1724 &lt;p&gt;Verify that the summary at the end looks correct. Are you indeed
1725 using the Boot JDK and native toolchain that you expect?&lt;/p&gt;
1726 &lt;p&gt;By default, the JDK has a strict approach where warnings from the
1727 compiler is considered errors which fail the build. For very new or very
1728 old compiler versions, this can trigger new classes of warnings, which
1729 thus fails the build. Run &lt;code&gt;configure&lt;/code&gt; with
1730 &lt;code&gt;--disable-warnings-as-errors&lt;/code&gt; to turn of this behavior. (The
1731 warnings will still show, but not make the build fail.)&lt;/p&gt;
1732 &lt;h4 id=&quot;problems-with-incremental-rebuilds&quot;&gt;Problems with Incremental
1733 Rebuilds&lt;/h4&gt;
1734 &lt;p&gt;Incremental rebuilds mean that when you modify part of the product,
1735 only the affected parts get rebuilt. While this works great in most
1736 cases, and significantly speed up the development process, from time to
1737 time complex interdependencies will result in an incorrect build result.
1738 This is the most common cause for unexpected build problems.&lt;/p&gt;
1739 &lt;p&gt;Here are a suggested list of things to try if you are having
1740 unexpected build problems. Each step requires more time than the one
1741 before, so try them in order. Most issues will be solved at step 1 or
1742 2.&lt;/p&gt;
1743 &lt;ol type=&quot;1&quot;&gt;
1744 &lt;li&gt;&lt;p&gt;Make sure your repository is up-to-date&lt;/p&gt;
1745 &lt;p&gt;Run &lt;code&gt;git pull origin master&lt;/code&gt; to make sure you have the
1746 latest changes.&lt;/p&gt;&lt;/li&gt;
1747 &lt;li&gt;&lt;p&gt;Clean build results&lt;/p&gt;
1748 &lt;p&gt;The simplest way to fix incremental rebuild issues is to run
1749 &lt;code&gt;make clean&lt;/code&gt;. This will remove all build results, but not the
1750 configuration or any build system support artifacts. In most cases, this
1751 will solve build errors resulting from incremental build
1752 mismatches.&lt;/p&gt;&lt;/li&gt;
1753 &lt;li&gt;&lt;p&gt;Completely clean the build directory.&lt;/p&gt;
1754 &lt;p&gt;If this does not work, the next step is to run
1755 &lt;code&gt;make dist-clean&lt;/code&gt;, or removing the build output directory
1756 (&lt;code&gt;$BUILD&lt;/code&gt;). This will clean all generated output, including
1757 your configuration. You will need to re-run &lt;code&gt;configure&lt;/code&gt; after
1758 this step. A good idea is to run &lt;code&gt;make print-configuration&lt;/code&gt;
1759 before running &lt;code&gt;make dist-clean&lt;/code&gt;, as this will print your
1760 current &lt;code&gt;configure&lt;/code&gt; command line. Here&#39;s a way to do
1761 this:&lt;/p&gt;
1762 &lt;pre&gt;&lt;code&gt;make print-configuration &amp;gt; current-configuration
1763 make dist-clean
1764 bash configure $(cat current-configuration)
1765 make&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
1766 &lt;li&gt;&lt;p&gt;Re-clone the Git repository&lt;/p&gt;
1767 &lt;p&gt;Sometimes the Git repository gets in a state that causes the product
1768 to be un-buildable. In such a case, the simplest solution is often the
1769 &quot;sledgehammer approach&quot;: delete the entire repository, and re-clone it.
1770 If you have local changes, save them first to a different location using
1771 &lt;code&gt;git format-patch&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
1772 &lt;/ol&gt;
1773 &lt;h3 id=&quot;specific-build-issues&quot;&gt;Specific Build Issues&lt;/h3&gt;
1774 &lt;h4 id=&quot;clock-skew&quot;&gt;Clock Skew&lt;/h4&gt;
1775 &lt;p&gt;If you get an error message like this:&lt;/p&gt;
1776 &lt;pre&gt;&lt;code&gt;File &amp;#39;xxx&amp;#39; has modification time in the future.
1777 Clock skew detected. Your build may be incomplete.&lt;/code&gt;&lt;/pre&gt;
1778 &lt;p&gt;then the clock on your build machine is out of sync with the
1779 timestamps on the source files. Other errors, apparently unrelated but
1780 in fact caused by the clock skew, can occur along with the clock skew
1781 warnings. These secondary errors may tend to obscure the fact that the
1782 true root cause of the problem is an out-of-sync clock.&lt;/p&gt;
1783 &lt;p&gt;If you see these warnings, reset the clock on the build machine, run
1784 &lt;code&gt;make clean&lt;/code&gt; and restart the build.&lt;/p&gt;
1785 &lt;h4 id=&quot;out-of-memory-errors&quot;&gt;Out of Memory Errors&lt;/h4&gt;
1786 &lt;p&gt;On Windows, you might get error messages like this:&lt;/p&gt;
1787 &lt;pre&gt;&lt;code&gt;fatal error - couldn&amp;#39;t allocate heap
1788 cannot create ... Permission denied
1789 spawn failed&lt;/code&gt;&lt;/pre&gt;
1790 &lt;p&gt;This can be a sign of a Cygwin problem. See the information about
1791 solving problems in the &lt;a href=&quot;#cygwin&quot;&gt;Cygwin&lt;/a&gt; section. Rebooting
1792 the computer might help temporarily.&lt;/p&gt;
1793 &lt;h4 id=&quot;spaces-in-path&quot;&gt;Spaces in Path&lt;/h4&gt;
1794 &lt;p&gt;On Windows, when configuring, &lt;code&gt;fixpath.sh&lt;/code&gt; may report that
1795 some directory names have spaces. Usually, it assumes those directories
1796 have &lt;a
1797 href=&quot;https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/fsutil-8dot3name&quot;&gt;short
1798 paths&lt;/a&gt;. You can run &lt;code&gt;fsutil file setshortname&lt;/code&gt; in
1799 &lt;code&gt;cmd&lt;/code&gt; on certain directories, such as
1800 &lt;code&gt;Microsoft Visual Studio&lt;/code&gt; or &lt;code&gt;Windows Kits&lt;/code&gt;, to
1801 assign arbitrary short paths so &lt;code&gt;configure&lt;/code&gt; can access
1802 them.&lt;/p&gt;
1803 &lt;h3 id=&quot;getting-help&quot;&gt;Getting Help&lt;/h3&gt;
1804 &lt;p&gt;If none of the suggestions in this document helps you, or if you find
1805 what you believe is a bug in the build system, please contact the Build
1806 Group by sending a mail to &lt;a
1807 href=&quot;mailto:build-dev@openjdk.org&quot;&gt;build-dev@openjdk.org&lt;/a&gt;. Please
1808 include the relevant parts of the configure and/or build log.&lt;/p&gt;
1809 &lt;p&gt;If you need general help or advice about developing for the JDK, you
1810 can also contact the Adoption Group. See the section on &lt;a
1811 href=&quot;#contributing-to-openjdk&quot;&gt;Contributing to OpenJDK&lt;/a&gt; for more
1812 information.&lt;/p&gt;
1813 &lt;h2 id=&quot;reproducible-builds&quot;&gt;Reproducible Builds&lt;/h2&gt;
1814 &lt;p&gt;Build reproducibility is the property of getting exactly the same
1815 bits out when building, every time, independent on who builds the
1816 product, or where. This is for many reasons a harder goal than it
1817 initially appears, but it is an important goal, for security reasons and
1818 others. Please see &lt;a
1819 href=&quot;https://reproducible-builds.org&quot;&gt;Reproducible Builds&lt;/a&gt; for more
1820 information about the background and reasons for reproducible
1821 builds.&lt;/p&gt;
1822 &lt;p&gt;Currently, it is not possible to build OpenJDK fully reproducibly,
1823 but getting there is an ongoing effort.&lt;/p&gt;
1824 &lt;p&gt;An absolute prerequisite for building reproducible is to speficy a
1825 fixed build time, since time stamps are embedded in many file formats.
1826 This is done by setting the &lt;code&gt;SOURCE_DATE_EPOCH&lt;/code&gt; environment
1827 variable, which is an &lt;a
1828 href=&quot;https://reproducible-builds.org/docs/source-date-epoch/&quot;&gt;industry
1829 standard&lt;/a&gt;, that many tools, such as gcc, recognize, and use in place
1830 of the current time when generating output.&lt;/p&gt;
1831 &lt;p&gt;To generate reproducible builds, you must set
1832 &lt;code&gt;SOURCE_DATE_EPOCH&lt;/code&gt; before running &lt;code&gt;configure&lt;/code&gt;.
1833 The value in &lt;code&gt;SOURCE_DATE_EPOCH&lt;/code&gt; will be stored in the
1834 configuration, and used by &lt;code&gt;make&lt;/code&gt;. Setting
1835 &lt;code&gt;SOURCE_DATE_EPOCH&lt;/code&gt; before running &lt;code&gt;make&lt;/code&gt; will
1836 have no effect on the build.&lt;/p&gt;
1837 &lt;p&gt;You must also make sure your build does not rely on
1838 &lt;code&gt;configure&lt;/code&gt;&#39;s default adhoc version strings. Default adhoc
1839 version strings &lt;code&gt;OPT&lt;/code&gt; segment include user name and source
1840 directory. You can either override just the &lt;code&gt;OPT&lt;/code&gt; segment
1841 using &lt;code&gt;--with-version-opt=&amp;lt;any fixed string&amp;gt;&lt;/code&gt;, or you
1842 can specify the entire version string using
1843 &lt;code&gt;--with-version-string=&amp;lt;your version&amp;gt;&lt;/code&gt;.&lt;/p&gt;
1844 &lt;p&gt;This is a typical example of how to build the JDK in a reproducible
1845 way:&lt;/p&gt;
1846 &lt;pre&gt;&lt;code&gt;export SOURCE_DATE_EPOCH=946684800
1847 bash configure --with-version-opt=adhoc
1848 make&lt;/code&gt;&lt;/pre&gt;
1849 &lt;p&gt;Note that regardless if you specify a source date for
1850 &lt;code&gt;configure&lt;/code&gt; or not, the JDK build system will set
1851 &lt;code&gt;SOURCE_DATE_EPOCH&lt;/code&gt; for all build tools when building. If
1852 &lt;code&gt;--with-source-date&lt;/code&gt; has the value &lt;code&gt;current&lt;/code&gt;
1853 (which is the default unless &lt;code&gt;SOURCE_DATE_EPOCH&lt;/code&gt; is found by
1854 in the environment by &lt;code&gt;configure&lt;/code&gt;), the source date value
1855 will be determined at configure time.&lt;/p&gt;
1856 &lt;p&gt;There are several aspects of reproducible builds that can be
1857 individually adjusted by &lt;code&gt;configure&lt;/code&gt; arguments. If any of
1858 these are given, they will override the value derived from
1859 &lt;code&gt;SOURCE_DATE_EPOCH&lt;/code&gt;. These arguments are:&lt;/p&gt;
1860 &lt;ul&gt;
1861 &lt;li&gt;&lt;p&gt;&lt;code&gt;--with-source-date&lt;/code&gt;&lt;/p&gt;
1862 &lt;p&gt;This option controls how the JDK build sets
1863 &lt;code&gt;SOURCE_DATE_EPOCH&lt;/code&gt; when building. It can be set to a value
1864 describing a date, either an epoch based timestamp as an integer, or a
1865 valid ISO-8601 date.&lt;/p&gt;
1866 &lt;p&gt;It can also be set to one of the special values &lt;code&gt;current&lt;/code&gt;,
1867 &lt;code&gt;updated&lt;/code&gt; or &lt;code&gt;version&lt;/code&gt;. &lt;code&gt;current&lt;/code&gt; means
1868 that the time of running &lt;code&gt;configure&lt;/code&gt; will be used.
1869 &lt;code&gt;version&lt;/code&gt; will use the nominal release date for the current
1870 JDK version. &lt;code&gt;updated&lt;/code&gt;, which means that
1871 &lt;code&gt;SOURCE_DATE_EPOCH&lt;/code&gt; will be set to the current time each time
1872 you are running &lt;code&gt;make&lt;/code&gt;. All choices, except for
1873 &lt;code&gt;updated&lt;/code&gt;, will set a fixed value for the source date
1874 timestamp.&lt;/p&gt;
1875 &lt;p&gt;When &lt;code&gt;SOURCE_DATE_EPOCH&lt;/code&gt; is set, the default value for
1876 &lt;code&gt;--with-source-date&lt;/code&gt; will be the value given by
1877 &lt;code&gt;SOURCE_DATE_EPOCH&lt;/code&gt;. Otherwise, the default value is
1878 &lt;code&gt;current&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
1879 &lt;li&gt;&lt;p&gt;&lt;code&gt;--with-hotspot-build-time&lt;/code&gt;&lt;/p&gt;
1880 &lt;p&gt;This option controls the build time string that will be included in
1881 the hotspot library (&lt;code&gt;libjvm.so&lt;/code&gt; or &lt;code&gt;jvm.dll&lt;/code&gt;).
1882 When the source date is fixed (e.g. by setting
1883 &lt;code&gt;SOURCE_DATE_EPOCH&lt;/code&gt;), the default value for
1884 &lt;code&gt;--with-hotspot-build-time&lt;/code&gt; will be an ISO 8601
1885 representation of that time stamp. Otherwise the default value will be
1886 the current time when building hotspot.&lt;/p&gt;&lt;/li&gt;
1887 &lt;li&gt;&lt;p&gt;&lt;code&gt;--with-copyright-year&lt;/code&gt;&lt;/p&gt;
1888 &lt;p&gt;This option controls the copyright year in some generated text files.
1889 When the source date is fixed (e.g. by setting
1890 &lt;code&gt;SOURCE_DATE_EPOCH&lt;/code&gt;), the default value for
1891 &lt;code&gt;--with-copyright-year&lt;/code&gt; will be the year of that time stamp.
1892 Otherwise the default is the current year at the time of running
1893 configure. This can be overridden by
1894 &lt;code&gt;--with-copyright-year=&amp;lt;year&amp;gt;&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
1895 &lt;li&gt;&lt;p&gt;&lt;code&gt;--enable-reproducible-build&lt;/code&gt;&lt;/p&gt;
1896 &lt;p&gt;This option controls some additional behavior needed to make the
1897 build reproducible. When the source date is fixed (e.g. by setting
1898 &lt;code&gt;SOURCE_DATE_EPOCH&lt;/code&gt;), this flag will be turned on by default.
1899 Otherwise, the value is determined by heuristics. If it is explicitly
1900 turned off, the build might not be reproducible.&lt;/p&gt;&lt;/li&gt;
1901 &lt;/ul&gt;
1902 &lt;h2 id=&quot;hints-and-suggestions-for-advanced-users&quot;&gt;Hints and Suggestions
1903 for Advanced Users&lt;/h2&gt;
1904 &lt;h3 id=&quot;bash-completion&quot;&gt;Bash Completion&lt;/h3&gt;
1905 &lt;p&gt;The &lt;code&gt;configure&lt;/code&gt; and &lt;code&gt;make&lt;/code&gt; commands tries to
1906 play nice with bash command-line completion (using
1907 &lt;code&gt;&amp;lt;tab&amp;gt;&lt;/code&gt; or &lt;code&gt;&amp;lt;tab&amp;gt;&amp;lt;tab&amp;gt;&lt;/code&gt;). To use
1908 this functionality, make sure you enable completion in your
1909 &lt;code&gt;~/.bashrc&lt;/code&gt; (see instructions for bash in your operating
1910 system).&lt;/p&gt;
1911 &lt;p&gt;Make completion will work out of the box, and will complete valid
1912 make targets. For instance, typing &lt;code&gt;make jdk-i&amp;lt;tab&amp;gt;&lt;/code&gt;
1913 will complete to &lt;code&gt;make jdk-image&lt;/code&gt;.&lt;/p&gt;
1914 &lt;p&gt;The &lt;code&gt;configure&lt;/code&gt; script can get completion for options, but
1915 for this to work you need to help &lt;code&gt;bash&lt;/code&gt; on the way. The
1916 standard way of running the script, &lt;code&gt;bash configure&lt;/code&gt;, will
1917 not be understood by bash completion. You need &lt;code&gt;configure&lt;/code&gt; to
1918 be the command to run. One way to achieve this is to add a simple helper
1919 script to your path:&lt;/p&gt;
1920 &lt;pre&gt;&lt;code&gt;cat &amp;lt;&amp;lt; EOT &amp;gt; /tmp/configure
1921 #!/bin/bash
1922 if [ \$(pwd) = \$(cd \$(dirname \$0); pwd) ] ; then
1923   echo &amp;gt;&amp;amp;2 &amp;quot;Abort: Trying to call configure helper recursively&amp;quot;
1924   exit 1
1925 fi
1926 
1927 bash \$PWD/configure &amp;quot;\$@&amp;quot;
1928 EOT
1929 chmod +x /tmp/configure
1930 sudo mv /tmp/configure /usr/local/bin&lt;/code&gt;&lt;/pre&gt;
1931 &lt;p&gt;Now &lt;code&gt;configure --en&amp;lt;tab&amp;gt;-dt&amp;lt;tab&amp;gt;&lt;/code&gt; will result
1932 in &lt;code&gt;configure --enable-dtrace&lt;/code&gt;.&lt;/p&gt;
1933 &lt;h3 id=&quot;using-multiple-configurations&quot;&gt;Using Multiple
1934 Configurations&lt;/h3&gt;
1935 &lt;p&gt;You can have multiple configurations for a single source repository.
1936 When you create a new configuration, run
1937 &lt;code&gt;configure --with-conf-name=&amp;lt;name&amp;gt;&lt;/code&gt; to create a
1938 configuration with the name &lt;code&gt;&amp;lt;name&amp;gt;&lt;/code&gt;. Alternatively,
1939 you can create a directory under &lt;code&gt;build&lt;/code&gt; and run
1940 &lt;code&gt;configure&lt;/code&gt; from there, e.g.
1941 &lt;code&gt;mkdir build/&amp;lt;name&amp;gt; &amp;amp;&amp;amp; cd build/&amp;lt;name&amp;gt; &amp;amp;&amp;amp; bash ../../configure&lt;/code&gt;.&lt;/p&gt;
1942 &lt;p&gt;Then you can build that configuration using
1943 &lt;code&gt;make CONF_NAME=&amp;lt;name&amp;gt;&lt;/code&gt; or
1944 &lt;code&gt;make CONF=&amp;lt;pattern&amp;gt;&lt;/code&gt;, where
1945 &lt;code&gt;&amp;lt;pattern&amp;gt;&lt;/code&gt; is a substring matching one or several
1946 configurations, e.g. &lt;code&gt;CONF=debug&lt;/code&gt;. The special empty pattern
1947 (&lt;code&gt;CONF=&lt;/code&gt;) will match &lt;em&gt;all&lt;/em&gt; available configuration, so
1948 &lt;code&gt;make CONF= hotspot&lt;/code&gt; will build the &lt;code&gt;hotspot&lt;/code&gt;
1949 target for all configurations. Alternatively, you can execute
1950 &lt;code&gt;make&lt;/code&gt; in the configuration directory, e.g.
1951 &lt;code&gt;cd build/&amp;lt;name&amp;gt; &amp;amp;&amp;amp; make&lt;/code&gt;.&lt;/p&gt;
1952 &lt;h3 id=&quot;handling-reconfigurations&quot;&gt;Handling Reconfigurations&lt;/h3&gt;
1953 &lt;p&gt;If you update the repository and part of the configure script has
1954 changed, the build system will force you to re-run
1955 &lt;code&gt;configure&lt;/code&gt;.&lt;/p&gt;
1956 &lt;p&gt;Most of the time, you will be fine by running &lt;code&gt;configure&lt;/code&gt;
1957 again with the same arguments as the last time, which can easily be
1958 performed by &lt;code&gt;make reconfigure&lt;/code&gt;. To simplify this, you can
1959 use the &lt;code&gt;CONF_CHECK&lt;/code&gt; make control variable, either as
1960 &lt;code&gt;make CONF_CHECK=auto&lt;/code&gt;, or by setting an environment
1961 variable. For instance, if you add &lt;code&gt;export CONF_CHECK=auto&lt;/code&gt;
1962 to your &lt;code&gt;.bashrc&lt;/code&gt; file, &lt;code&gt;make&lt;/code&gt; will always run
1963 &lt;code&gt;reconfigure&lt;/code&gt; automatically whenever the configure script has
1964 changed.&lt;/p&gt;
1965 &lt;p&gt;You can also use &lt;code&gt;CONF_CHECK=ignore&lt;/code&gt; to skip the check for
1966 a needed configure update. This might speed up the build, but comes at
1967 the risk of an incorrect build result. This is only recommended if you
1968 know what you&#39;re doing.&lt;/p&gt;
1969 &lt;p&gt;From time to time, you will also need to modify the command line to
1970 &lt;code&gt;configure&lt;/code&gt; due to changes. Use
1971 &lt;code&gt;make print-configuration&lt;/code&gt; to show the command line used for
1972 your current configuration.&lt;/p&gt;
1973 &lt;h3 id=&quot;using-fine-grained-make-targets&quot;&gt;Using Fine-Grained Make
1974 Targets&lt;/h3&gt;
1975 &lt;p&gt;The default behavior for make is to create consistent and correct
1976 output, at the expense of build speed, if necessary.&lt;/p&gt;
1977 &lt;p&gt;If you are prepared to take some risk of an incorrect build, and know
1978 enough of the system to understand how things build and interact, you
1979 can speed up the build process considerably by instructing make to only
1980 build a portion of the product.&lt;/p&gt;
1981 &lt;h4 id=&quot;building-individual-modules&quot;&gt;Building Individual Modules&lt;/h4&gt;
1982 &lt;p&gt;The safe way to use fine-grained make targets is to use the module
1983 specific make targets. All source code in the JDK is organized so it
1984 belongs to a module, e.g. &lt;code&gt;java.base&lt;/code&gt; or
1985 &lt;code&gt;jdk.jdwp.agent&lt;/code&gt;. You can build only a specific module, by
1986 giving it as make target: &lt;code&gt;make jdk.jdwp.agent&lt;/code&gt;. If the
1987 specified module depends on other modules (e.g. &lt;code&gt;java.base&lt;/code&gt;),
1988 those modules will be built first.&lt;/p&gt;
1989 &lt;p&gt;You can also specify a set of modules, just as you can always specify
1990 a set of make targets:
1991 &lt;code&gt;make jdk.crypto.cryptoki jdk.crypto.ec jdk.crypto.mscapi&lt;/code&gt;&lt;/p&gt;
1992 &lt;h4 id=&quot;building-individual-module-phases&quot;&gt;Building Individual Module
1993 Phases&lt;/h4&gt;
1994 &lt;p&gt;The build process for each module is divided into separate phases.
1995 Not all modules need all phases. Which are needed depends on what kind
1996 of source code and other artifact the module consists of. The phases
1997 are:&lt;/p&gt;
1998 &lt;ul&gt;
1999 &lt;li&gt;&lt;code&gt;gensrc&lt;/code&gt; (Generate source code to compile)&lt;/li&gt;
2000 &lt;li&gt;&lt;code&gt;gendata&lt;/code&gt; (Generate non-source code artifacts)&lt;/li&gt;
2001 &lt;li&gt;&lt;code&gt;copy&lt;/code&gt; (Copy resource artifacts)&lt;/li&gt;
2002 &lt;li&gt;&lt;code&gt;java&lt;/code&gt; (Compile Java code)&lt;/li&gt;
2003 &lt;li&gt;&lt;code&gt;launchers&lt;/code&gt; (Compile native executables)&lt;/li&gt;
2004 &lt;li&gt;&lt;code&gt;libs&lt;/code&gt; (Compile native libraries)&lt;/li&gt;
2005 &lt;/ul&gt;
2006 &lt;p&gt;You can build only a single phase for a module by using the notation
2007 &lt;code&gt;$MODULE-$PHASE&lt;/code&gt;. For instance, to build the
2008 &lt;code&gt;gensrc&lt;/code&gt; phase for &lt;code&gt;java.base&lt;/code&gt;, use
2009 &lt;code&gt;make java.base-gensrc&lt;/code&gt;.&lt;/p&gt;
2010 &lt;p&gt;Note that some phases may depend on others, e.g. &lt;code&gt;java&lt;/code&gt;
2011 depends on &lt;code&gt;gensrc&lt;/code&gt; (if present). Make will build all needed
2012 prerequisites before building the requested phase.&lt;/p&gt;
2013 &lt;h4 id=&quot;skipping-the-dependency-check&quot;&gt;Skipping the Dependency
2014 Check&lt;/h4&gt;
2015 &lt;p&gt;When using an iterative development style with frequent quick
2016 rebuilds, the dependency check made by make can take up a significant
2017 portion of the time spent on the rebuild. In such cases, it can be
2018 useful to bypass the dependency check in make.&lt;/p&gt;
2019 &lt;blockquote&gt;
2020 &lt;p&gt;&lt;strong&gt;Note that if used incorrectly, this can lead to a broken
2021 build!&lt;/strong&gt;&lt;/p&gt;
2022 &lt;/blockquote&gt;
2023 &lt;p&gt;To achieve this, append &lt;code&gt;-only&lt;/code&gt; to the build target. For
2024 instance, &lt;code&gt;make jdk.jdwp.agent-java-only&lt;/code&gt; will &lt;em&gt;only&lt;/em&gt;
2025 build the &lt;code&gt;java&lt;/code&gt; phase of the &lt;code&gt;jdk.jdwp.agent&lt;/code&gt;
2026 module. If the required dependencies are not present, the build can
2027 fail. On the other hand, the execution time measures in
2028 milliseconds.&lt;/p&gt;
2029 &lt;p&gt;A useful pattern is to build the first time normally (e.g.
2030 &lt;code&gt;make jdk.jdwp.agent&lt;/code&gt;) and then on subsequent builds, use the
2031 &lt;code&gt;-only&lt;/code&gt; make target.&lt;/p&gt;
2032 &lt;h4 id=&quot;rebuilding-part-of-java.base-jdk_filter&quot;&gt;Rebuilding Part of
2033 java.base (JDK_FILTER)&lt;/h4&gt;
2034 &lt;p&gt;If you are modifying files in &lt;code&gt;java.base&lt;/code&gt;, which is the by
2035 far largest module in the JDK, then you need to rebuild all those files
2036 whenever a single file has changed. (This inefficiency will hopefully be
2037 addressed in JDK 10.)&lt;/p&gt;
2038 &lt;p&gt;As a hack, you can use the make control variable
2039 &lt;code&gt;JDK_FILTER&lt;/code&gt; to specify a pattern that will be used to limit
2040 the set of files being recompiled. For instance,
2041 &lt;code&gt;make java.base JDK_FILTER=javax/crypto&lt;/code&gt; (or, to combine
2042 methods, &lt;code&gt;make java.base-java-only JDK_FILTER=javax/crypto&lt;/code&gt;)
2043 will limit the compilation to files in the &lt;code&gt;javax.crypto&lt;/code&gt;
2044 package.&lt;/p&gt;
2045 &lt;h2 id=&quot;understanding-the-build-system&quot;&gt;Understanding the Build
2046 System&lt;/h2&gt;
2047 &lt;p&gt;This section will give you a more technical description on the
2048 details of the build system.&lt;/p&gt;
2049 &lt;h3 id=&quot;configurations&quot;&gt;Configurations&lt;/h3&gt;
2050 &lt;p&gt;The build system expects to find one or more configuration. These are
2051 technically defined by the &lt;code&gt;spec.gmk&lt;/code&gt; in a subdirectory to
2052 the &lt;code&gt;build&lt;/code&gt; subdirectory. The &lt;code&gt;spec.gmk&lt;/code&gt; file is
2053 generated by &lt;code&gt;configure&lt;/code&gt;, and contains in principle the
2054 configuration (directly or by files included by
2055 &lt;code&gt;spec.gmk&lt;/code&gt;).&lt;/p&gt;
2056 &lt;p&gt;You can, in fact, select a configuration to build by pointing to the
2057 &lt;code&gt;spec.gmk&lt;/code&gt; file with the &lt;code&gt;SPEC&lt;/code&gt; make control
2058 variable, e.g. &lt;code&gt;make SPEC=$BUILD/spec.gmk&lt;/code&gt;. While this is not
2059 the recommended way to call &lt;code&gt;make&lt;/code&gt; as a user, it is what is
2060 used under the hood by the build system.&lt;/p&gt;
2061 &lt;h3 id=&quot;build-output-structure&quot;&gt;Build Output Structure&lt;/h3&gt;
2062 &lt;p&gt;The build output for a configuration will end up in
2063 &lt;code&gt;build/&amp;lt;configuration name&amp;gt;&lt;/code&gt;, which we refer to as
2064 &lt;code&gt;$BUILD&lt;/code&gt; in this document. The &lt;code&gt;$BUILD&lt;/code&gt; directory
2065 contains the following important directories:&lt;/p&gt;
2066 &lt;pre&gt;&lt;code&gt;buildtools/
2067 configure-support/
2068 hotspot/
2069 images/
2070 jdk/
2071 make-support/
2072 support/
2073 test-results/
2074 test-support/&lt;/code&gt;&lt;/pre&gt;
2075 &lt;p&gt;This is what they are used for:&lt;/p&gt;
2076 &lt;ul&gt;
2077 &lt;li&gt;&lt;p&gt;&lt;code&gt;images&lt;/code&gt;: This is the directory were the output of the
2078 &lt;code&gt;*-image&lt;/code&gt; make targets end up. For instance,
2079 &lt;code&gt;make jdk-image&lt;/code&gt; ends up in &lt;code&gt;images/jdk&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
2080 &lt;li&gt;&lt;p&gt;&lt;code&gt;jdk&lt;/code&gt;: This is the &quot;exploded image&quot;. After
2081 &lt;code&gt;make jdk&lt;/code&gt;, you will be able to launch the newly built JDK by
2082 running &lt;code&gt;$BUILD/jdk/bin/java&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
2083 &lt;li&gt;&lt;p&gt;&lt;code&gt;test-results&lt;/code&gt;: This directory contains the results
2084 from running tests.&lt;/p&gt;&lt;/li&gt;
2085 &lt;li&gt;&lt;p&gt;&lt;code&gt;support&lt;/code&gt;: This is an area for intermediate files
2086 needed during the build, e.g. generated source code, object files and
2087 class files. Some noteworthy directories in &lt;code&gt;support&lt;/code&gt; is
2088 &lt;code&gt;gensrc&lt;/code&gt;, which contains the generated source code, and the
2089 &lt;code&gt;modules_*&lt;/code&gt; directories, which contains the files in a
2090 per-module hierarchy that will later be collapsed into the
2091 &lt;code&gt;jdk&lt;/code&gt; directory of the exploded image.&lt;/p&gt;&lt;/li&gt;
2092 &lt;li&gt;&lt;p&gt;&lt;code&gt;buildtools&lt;/code&gt;: This is an area for tools compiled for
2093 the build platform that are used during the rest of the build.&lt;/p&gt;&lt;/li&gt;
2094 &lt;li&gt;&lt;p&gt;&lt;code&gt;hotspot&lt;/code&gt;: This is an area for intermediate files
2095 needed when building hotspot.&lt;/p&gt;&lt;/li&gt;
2096 &lt;li&gt;&lt;p&gt;&lt;code&gt;configure-support&lt;/code&gt;, &lt;code&gt;make-support&lt;/code&gt; and
2097 &lt;code&gt;test-support&lt;/code&gt;: These directories contain files that are
2098 needed by the build system for &lt;code&gt;configure&lt;/code&gt;, &lt;code&gt;make&lt;/code&gt;
2099 and for running tests.&lt;/p&gt;&lt;/li&gt;
2100 &lt;/ul&gt;
2101 &lt;h3 id=&quot;fixpath&quot;&gt;Fixpath&lt;/h3&gt;
2102 &lt;p&gt;Windows path typically look like &lt;code&gt;C:\User\foo&lt;/code&gt;, while Unix
2103 paths look like &lt;code&gt;/home/foo&lt;/code&gt;. Tools with roots from Unix often
2104 experience issues related to this mismatch when running on Windows.&lt;/p&gt;
2105 &lt;p&gt;In the JDK build, we always use Unix paths internally, and only just
2106 before calling a tool that does not understand Unix paths do we convert
2107 them to Windows paths.&lt;/p&gt;
2108 &lt;p&gt;This conversion is done by the &lt;code&gt;fixpath&lt;/code&gt; tool, which is a
2109 small wrapper that modifies unix-style paths to Windows-style paths in
2110 command lines. Fixpath is compiled automatically by
2111 &lt;code&gt;configure&lt;/code&gt;.&lt;/p&gt;
2112 &lt;h3 id=&quot;native-debug-symbols&quot;&gt;Native Debug Symbols&lt;/h3&gt;
2113 &lt;p&gt;Native libraries and executables can have debug symbol (and other
2114 debug information) associated with them. How this works is very much
2115 platform dependent, but a common problem is that debug symbol
2116 information takes a lot of disk space, but is rarely needed by the end
2117 user.&lt;/p&gt;
2118 &lt;p&gt;The JDK supports different methods on how to handle debug symbols.
2119 The method used is selected by &lt;code&gt;--with-native-debug-symbols&lt;/code&gt;,
2120 and available methods are &lt;code&gt;none&lt;/code&gt;, &lt;code&gt;internal&lt;/code&gt;,
2121 &lt;code&gt;external&lt;/code&gt;, &lt;code&gt;zipped&lt;/code&gt;.&lt;/p&gt;
2122 &lt;ul&gt;
2123 &lt;li&gt;&lt;p&gt;&lt;code&gt;none&lt;/code&gt; means that no debug symbols will be generated
2124 during the build.&lt;/p&gt;&lt;/li&gt;
2125 &lt;li&gt;&lt;p&gt;&lt;code&gt;internal&lt;/code&gt; means that debug symbols will be generated
2126 during the build, and they will be stored in the generated
2127 binary.&lt;/p&gt;&lt;/li&gt;
2128 &lt;li&gt;&lt;p&gt;&lt;code&gt;external&lt;/code&gt; means that debug symbols will be generated
2129 during the build, and after the compilation, they will be moved into a
2130 separate &lt;code&gt;.debuginfo&lt;/code&gt; file. (This was previously known as
2131 FDS, Full Debug Symbols).&lt;/p&gt;&lt;/li&gt;
2132 &lt;li&gt;&lt;p&gt;&lt;code&gt;zipped&lt;/code&gt; is like &lt;code&gt;external&lt;/code&gt;, but the
2133 .debuginfo file will also be zipped into a &lt;code&gt;.diz&lt;/code&gt;
2134 file.&lt;/p&gt;&lt;/li&gt;
2135 &lt;/ul&gt;
2136 &lt;p&gt;When building for distribution, &lt;code&gt;zipped&lt;/code&gt; is a good
2137 solution. Binaries built with &lt;code&gt;internal&lt;/code&gt; is suitable for use
2138 by developers, since they facilitate debugging, but should be stripped
2139 before distributed to end users.&lt;/p&gt;
2140 &lt;h3 id=&quot;autoconf-details&quot;&gt;Autoconf Details&lt;/h3&gt;
2141 &lt;p&gt;The &lt;code&gt;configure&lt;/code&gt; script is based on the autoconf framework,
2142 but in some details deviate from a normal autoconf
2143 &lt;code&gt;configure&lt;/code&gt; script.&lt;/p&gt;
2144 &lt;p&gt;The &lt;code&gt;configure&lt;/code&gt; script in the top level directory of the
2145 JDK is just a thin wrapper that calls
2146 &lt;code&gt;make/autoconf/configure&lt;/code&gt;. This in turn will run
2147 &lt;code&gt;autoconf&lt;/code&gt; to create the runnable (generated) configure
2148 script, as &lt;code&gt;.build/generated-configure.sh&lt;/code&gt;. Apart from being
2149 responsible for the generation of the runnable script, the
2150 &lt;code&gt;configure&lt;/code&gt; script also provides functionality that is not
2151 easily expressed in the normal Autoconf framework. As part of this
2152 functionality, the generated script is called.&lt;/p&gt;
2153 &lt;p&gt;The build system will detect if the Autoconf source files have
2154 changed, and will trigger a regeneration of the generated script if
2155 needed. You can also manually request such an update by
2156 &lt;code&gt;bash configure autogen&lt;/code&gt;.&lt;/p&gt;
2157 &lt;p&gt;In previous versions of the JDK, the generated script was checked in
2158 at &lt;code&gt;make/autoconf/generated-configure.sh&lt;/code&gt;. This is no longer
2159 the case.&lt;/p&gt;
2160 &lt;h3 id=&quot;developing-the-build-system-itself&quot;&gt;Developing the Build System
2161 Itself&lt;/h3&gt;
2162 &lt;p&gt;This section contains a few remarks about how to develop for the
2163 build system itself. It is not relevant if you are only making changes
2164 in the product source code.&lt;/p&gt;
2165 &lt;p&gt;While technically using &lt;code&gt;make&lt;/code&gt;, the make source files of
2166 the JDK does not resemble most other Makefiles. Instead of listing
2167 specific targets and actions (perhaps using patterns), the basic modus
2168 operandi is to call a high-level function (or properly, macro) from the
2169 API in &lt;code&gt;make/common&lt;/code&gt;. For instance, to compile all classes in
2170 the &lt;code&gt;jdk.internal.foo&lt;/code&gt; package in the &lt;code&gt;jdk.foo&lt;/code&gt;
2171 module, a call like this would be made:&lt;/p&gt;
2172 &lt;pre&gt;&lt;code&gt;$(eval $(call SetupJavaCompilation, BUILD_FOO_CLASSES, \
2173     SETUP := GENERATE_OLDBYTECODE, \
2174     SRC := $(TOPDIR)/src/jkd.foo/share/classes, \
2175     INCLUDES := jdk/internal/foo, \
2176     BIN := $(SUPPORT_OUTPUTDIR)/foo_classes, \
2177 ))&lt;/code&gt;&lt;/pre&gt;
2178 &lt;p&gt;By encapsulating and expressing the high-level knowledge of
2179 &lt;em&gt;what&lt;/em&gt; should be done, rather than &lt;em&gt;how&lt;/em&gt; it should be done
2180 (as is normal in Makefiles), we can build a much more powerful and
2181 flexible build system.&lt;/p&gt;
2182 &lt;p&gt;Correct dependency tracking is paramount. Sloppy dependency tracking
2183 will lead to improper parallelization, or worse, race conditions.&lt;/p&gt;
2184 &lt;p&gt;To test for/debug race conditions, try running
2185 &lt;code&gt;make JOBS=1&lt;/code&gt; and &lt;code&gt;make JOBS=100&lt;/code&gt; and see if it
2186 makes any difference. (It shouldn&#39;t).&lt;/p&gt;
2187 &lt;p&gt;To compare the output of two different builds and see if, and how,
2188 they differ, run &lt;code&gt;$BUILD1/compare.sh -o $BUILD2&lt;/code&gt;, where
2189 &lt;code&gt;$BUILD1&lt;/code&gt; and &lt;code&gt;$BUILD2&lt;/code&gt; are the two builds you
2190 want to compare.&lt;/p&gt;
2191 &lt;p&gt;To automatically build two consecutive versions and compare them, use
2192 &lt;code&gt;COMPARE_BUILD&lt;/code&gt;. The value of &lt;code&gt;COMPARE_BUILD&lt;/code&gt; is a
2193 set of variable=value assignments, like this:&lt;/p&gt;
2194 &lt;pre&gt;&lt;code&gt;make COMPARE_BUILD=CONF=--enable-new-hotspot-feature:MAKE=hotspot&lt;/code&gt;&lt;/pre&gt;
2195 &lt;p&gt;See &lt;code&gt;make/InitSupport.gmk&lt;/code&gt; for details on how to use
2196 &lt;code&gt;COMPARE_BUILD&lt;/code&gt;.&lt;/p&gt;
2197 &lt;p&gt;To analyze build performance, run with &lt;code&gt;LOG=trace&lt;/code&gt; and
2198 check &lt;code&gt;$BUILD/build-trace-time.log&lt;/code&gt;. Use &lt;code&gt;JOBS=1&lt;/code&gt;
2199 to avoid parallelism.&lt;/p&gt;
2200 &lt;p&gt;Please check that you adhere to the &lt;a
2201 href=&quot;http://openjdk.org/groups/build/doc/code-conventions.html&quot;&gt;Code
2202 Conventions for the Build System&lt;/a&gt; before submitting patches.&lt;/p&gt;
2203 &lt;h2 id=&quot;contributing-to-the-jdk&quot;&gt;Contributing to the JDK&lt;/h2&gt;
2204 &lt;p&gt;So, now you&#39;ve built your JDK, and made your first patch, and want to
2205 contribute it back to the OpenJDK Community.&lt;/p&gt;
2206 &lt;p&gt;First of all: Thank you! We gladly welcome your contribution.
2207 However, please bear in mind that the JDK is a massive project, and we
2208 must ask you to follow our rules and guidelines to be able to accept
2209 your contribution.&lt;/p&gt;
2210 &lt;p&gt;The official place to start is the &lt;a
2211 href=&quot;http://openjdk.org/contribute/&quot;&gt;&#39;How to contribute&#39; page&lt;/a&gt;.
2212 There is also an official (but somewhat outdated and skimpy on details)
2213 &lt;a href=&quot;http://openjdk.org/guide/&quot;&gt;Developer&#39;s Guide&lt;/a&gt;.&lt;/p&gt;
2214 &lt;p&gt;If this seems overwhelming to you, the Adoption Group is there to
2215 help you! A good place to start is their &lt;a
2216 href=&quot;https://wiki.openjdk.org/display/Adoption/New+Contributor&quot;&gt;&#39;New
2217 Contributor&#39; page&lt;/a&gt;, or start reading the comprehensive &lt;a
2218 href=&quot;https://adoptopenjdk.gitbooks.io/adoptopenjdk-getting-started-kit/en/&quot;&gt;Getting
2219 Started Kit&lt;/a&gt;. The Adoption Group will also happily answer any
2220 questions you have about contributing. Contact them by &lt;a
2221 href=&quot;http://mail.openjdk.org/mailman/listinfo/adoption-discuss&quot;&gt;mail&lt;/a&gt;
2222 or &lt;a href=&quot;http://openjdk.org/irc/&quot;&gt;IRC&lt;/a&gt;.&lt;/p&gt;
2223 &lt;h2 id=&quot;editing-this-document&quot;&gt;Editing this document&lt;/h2&gt;
2224 &lt;p&gt;If you want to contribute changes to this document, edit
2225 &lt;code&gt;doc/building.md&lt;/code&gt; and then run
2226 &lt;code&gt;make update-build-docs&lt;/code&gt; to generate the same changes in
2227 &lt;code&gt;doc/building.html&lt;/code&gt;.&lt;/p&gt;
2228 &lt;/body&gt;
2229 &lt;/html&gt;
    </pre>
  </body>
</html>